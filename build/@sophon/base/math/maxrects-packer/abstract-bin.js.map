{"version":3,"file":"abstract-bin.js","sources":["../../../../../libs/base/src/math/maxrects-packer/abstract-bin.ts"],"sourcesContent":["import {IRectangle, Rectangle} from './geom/Rectangle';\r\nimport {IOption} from './maxrects-packer';\r\n\r\nexport interface IBin {\r\n  width: number;\r\n  height: number;\r\n  maxWidth: number;\r\n  maxHeight: number;\r\n  freeRects: IRectangle[];\r\n  rects: IRectangle[];\r\n  options: IOption;\r\n  [propName: string]: any;\r\n}\r\n\r\nexport abstract class Bin<T extends IRectangle> implements IBin {\r\n  public width!: number;\r\n  public height!: number;\r\n  public maxWidth!: number;\r\n  public maxHeight!: number;\r\n  public freeRects!: IRectangle[];\r\n  public rects!: T[];\r\n  public options!: IOption;\r\n  public abstract add(rect: T): T | undefined;\r\n  public abstract add(width: number, height: number, data: any): T | undefined;\r\n  public abstract reset(deepRest: boolean): void;\r\n  public abstract repack(): T[] | undefined;\r\n\r\n  public data?: any;\r\n  public tag?: string;\r\n\r\n  protected _dirty = 0;\r\n  get dirty(): boolean {\r\n    return this._dirty > 0 || this.rects.some((rect) => rect.dirty);\r\n  }\r\n  /**\r\n   * Set bin dirty status\r\n   *\r\n   * @memberof Bin\r\n   */\r\n  public setDirty(value = true): void {\r\n    this._dirty = value ? this._dirty + 1 : 0;\r\n    if (!value) {\r\n      for (const rect of this.rects) {\r\n        if (rect.setDirty) rect.setDirty(false);\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":";MAcsB,GAAG,CAAA;AAChB,IAAA,KAAK,CAAU;AACf,IAAA,MAAM,CAAU;AAChB,IAAA,QAAQ,CAAU;AAClB,IAAA,SAAS,CAAU;AACnB,IAAA,SAAS,CAAgB;AACzB,IAAA,KAAK,CAAO;AACZ,IAAA,OAAO,CAAW;AAMlB,IAAA,IAAI,CAAO;AACX,IAAA,GAAG,CAAU;IAEV,MAAM,GAAG,CAAC,CAAC;AACrB,IAAA,IAAI,KAAK,GAAA;QACP,OAAO,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC;KACjE;IAMM,QAAQ,CAAC,KAAK,GAAG,IAAI,EAAA;AAC1B,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,EAAE;AACV,YAAA,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;gBAC7B,IAAI,IAAI,CAAC,QAAQ;AAAE,oBAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AACzC,aAAA;AACF,SAAA;KACF;AACF;;;;"}