{"version":3,"file":"abstract-bin.js","sources":["../../../../../libs/base/src/math/maxrects-packer/abstract-bin.ts"],"sourcesContent":["import {IRectangle, Rectangle} from './geom/Rectangle';\nimport {IOption} from './maxrects-packer';\n\nexport interface IBin {\n  width: number;\n  height: number;\n  maxWidth: number;\n  maxHeight: number;\n  freeRects: IRectangle[];\n  rects: IRectangle[];\n  options: IOption;\n  [propName: string]: any;\n}\n\nexport abstract class Bin<T extends IRectangle> implements IBin {\n  public width!: number;\n  public height!: number;\n  public maxWidth!: number;\n  public maxHeight!: number;\n  public freeRects!: IRectangle[];\n  public rects!: T[];\n  public options!: IOption;\n  public abstract add(rect: T): T | undefined;\n  public abstract add(width: number, height: number, data: any): T | undefined;\n  public abstract reset(deepRest: boolean): void;\n  public abstract repack(): T[] | undefined;\n\n  public data?: any;\n  public tag?: string;\n\n  protected _dirty = 0;\n  get dirty(): boolean {\n    return this._dirty > 0 || this.rects.some((rect) => rect.dirty);\n  }\n  /**\n   * Set bin dirty status\n   *\n   * @memberof Bin\n   */\n  public setDirty(value = true): void {\n    this._dirty = value ? this._dirty + 1 : 0;\n    if (!value) {\n      for (const rect of this.rects) {\n        if (rect.setDirty) rect.setDirty(false);\n      }\n    }\n  }\n}\n"],"names":[],"mappings":";MAcsB,GAAG,CAAA;AAChB,IAAA,KAAK,CAAU;AACf,IAAA,MAAM,CAAU;AAChB,IAAA,QAAQ,CAAU;AAClB,IAAA,SAAS,CAAU;AACnB,IAAA,SAAS,CAAgB;AACzB,IAAA,KAAK,CAAO;AACZ,IAAA,OAAO,CAAW;AAMlB,IAAA,IAAI,CAAO;AACX,IAAA,GAAG,CAAU;IAEV,MAAM,GAAG,CAAC,CAAC;AACrB,IAAA,IAAI,KAAK,GAAA;QACP,OAAO,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC;KACjE;IAMM,QAAQ,CAAC,KAAK,GAAG,IAAI,EAAA;AAC1B,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,EAAE;AACV,YAAA,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;gBAC7B,IAAI,IAAI,CAAC,QAAQ;AAAE,oBAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AACzC,aAAA;AACF,SAAA;KACF;AACF;;;;"}