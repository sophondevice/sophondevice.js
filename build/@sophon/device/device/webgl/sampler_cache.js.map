{"version":3,"file":"sampler_cache.js","sources":["../../../../../libs/device/src/device/webgl/sampler_cache.ts"],"sourcesContent":["import { WebGLTextureSampler } from './sampler_webgl';\nimport type { SamplerOptions } from '../gpuobject';\nimport type { WebGLDevice } from './device_webgl';\nexport class SamplerCache {\n  private _device: WebGLDevice;\n  private _samplers: { [hash: string]: WebGLTextureSampler };\n  constructor(device: WebGLDevice) {\n    this._device = device;\n    this._samplers = {};\n  }\n  fetchSampler(options: SamplerOptions): WebGLTextureSampler {\n    const hash = this.hash(options);\n    let sampler = this._samplers[hash];\n    if (!sampler) {\n      sampler = this.createSampler(options);\n      this._samplers[hash] = sampler;\n    }\n    return sampler;\n  }\n  private hash(options: SamplerOptions): string {\n    const addressU = options.addressU ? String(options.addressU) : '';\n    const addressV = options.addressV ? String(options.addressV) : '';\n    const addressW = options.addressW ? String(options.addressW) : '';\n    const magFilter = options.magFilter ? String(options.magFilter) : '';\n    const minFilter = options.minFilter ? String(options.minFilter) : '';\n    const mipFilter = options.mipFilter ? String(options.mipFilter) : '';\n    const lodMin = options.lodMin ? String(options.lodMin) : '';\n    const lodMax = options.lodMax ? String(options.lodMax) : '';\n    const compare = options.compare ? String(options.compare) : '';\n    const maxAnisotropy = options.maxAnisotropy ? String(options.maxAnisotropy) : '';\n    return `${addressU}:${addressV}:${addressW}:${magFilter}:${minFilter}:${mipFilter}:${lodMin}:${lodMax}:${compare}:${maxAnisotropy}`;\n  }\n  private createSampler(options: SamplerOptions): WebGLTextureSampler {\n    return new WebGLTextureSampler(this._device, options);\n  }\n}\n"],"names":[],"mappings":";;;MAGa,YAAY,CAAA;AACf,IAAA,OAAO,CAAc;AACrB,IAAA,SAAS,CAA0C;AAC3D,IAAA,WAAA,CAAY,MAAmB,EAAA;AAC7B,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;KACrB;AACD,IAAA,YAAY,CAAC,OAAuB,EAAA;QAClC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAChC,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,OAAO,EAAE;AACZ,YAAA,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AACtC,YAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC;AAChC,SAAA;AACD,QAAA,OAAO,OAAO,CAAC;KAChB;AACO,IAAA,IAAI,CAAC,OAAuB,EAAA;AAClC,QAAA,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;AAClE,QAAA,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;AAClE,QAAA,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;AAClE,QAAA,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;AACrE,QAAA,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;AACrE,QAAA,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;AACrE,QAAA,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;AAC5D,QAAA,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;AAC5D,QAAA,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;AAC/D,QAAA,MAAM,aAAa,GAAG,OAAO,CAAC,aAAa,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;QACjF,OAAO,CAAA,EAAG,QAAQ,CAAI,CAAA,EAAA,QAAQ,IAAI,QAAQ,CAAA,CAAA,EAAI,SAAS,CAAI,CAAA,EAAA,SAAS,IAAI,SAAS,CAAA,CAAA,EAAI,MAAM,CAAI,CAAA,EAAA,MAAM,IAAI,OAAO,CAAA,CAAA,EAAI,aAAa,CAAA,CAAE,CAAC;KACrI;AACO,IAAA,aAAa,CAAC,OAAuB,EAAA;QAC3C,OAAO,IAAI,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;KACvD;AACF;;;;"}