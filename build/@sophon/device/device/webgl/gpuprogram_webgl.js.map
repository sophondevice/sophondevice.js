{"version":3,"file":"gpuprogram_webgl.js","sources":["../../../../../libs/device/src/device/webgl/gpuprogram_webgl.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { WebGLGPUObject } from './gpuobject_webgl';\r\nimport { isWebGL2 } from './utils';\r\nimport { WebGLEnum } from './webgl_enum';\r\nimport { ShaderType } from '../base_types';\r\nimport { GPUProgram, semanticList, BindGroupLayout, BindPointInfo } from '../gpuobject';\r\nimport { WebGLTextureSampler } from './sampler_webgl';\r\nimport type { WebGLBaseTexture } from './basetexture_webgl';\r\nimport type { WebGLGPUBuffer } from './buffer_webgl';\r\nimport type { WebGLDevice } from './device_webgl';\r\nimport type { WebGLStructuredBuffer } from './structuredbuffer_webgl';\r\nimport type { TypedArrayConstructor } from '../../misc';\r\n\r\ntype UniformBlockArray = Int32Array | Uint32Array | Float32Array;\r\nexport interface IAttributeSetter {\r\n  (value: WebGLGPUBuffer | number | Iterable<number>, offset?: number, stride?: number): void;\r\n  location: number;\r\n}\r\n\r\nexport type IUniformValue = number | Iterable<number> | [WebGLBaseTexture, WebGLSampler];\r\nexport interface IUniformSetter {\r\n  (value: IUniformValue): unknown;\r\n}\r\n\r\ninterface ProgramUniformInfo {\r\n  index: number;\r\n  name: string;\r\n  type: number;\r\n  size: number;\r\n  blockIndex: number;\r\n  offset: number;\r\n  isArray: boolean;\r\n  viewCtor: TypedArrayConstructor<UniformBlockArray>;\r\n  viewElementSize: number;\r\n  view: UniformBlockArray;\r\n  location: WebGLUniformLocation;\r\n}\r\n\r\ninterface ProgramBlockInfo {\r\n  index: number;\r\n  used: boolean;\r\n  size: number;\r\n  uniformIndices: Uint32Array;\r\n}\r\n\r\nexport class WebGLGPUProgram extends WebGLGPUObject<WebGLProgram> implements GPUProgram<WebGLProgram> {\r\n  private _vs: string;\r\n  private _fs: string;\r\n  private _unitCounter: number;\r\n  private _uniformSetters: { [name: string]: IUniformSetter };\r\n  private _uniformInfo: ProgramUniformInfo[];\r\n  private _blockInfo: { [name: string]: ProgramBlockInfo };\r\n  private _bindGroupLayouts: BindGroupLayout[];\r\n  private _vertexAttributes: number[];\r\n  private _error: string;\r\n  private _vertexShader: WebGLShader;\r\n  private _fragmentShader: WebGLShader;\r\n  constructor(device: WebGLDevice, vertexShader: string, fragmentShader: string, bindGroupLayouts: BindGroupLayout[], vertexAttributes: number[]) {\r\n    super(device);\r\n    this._object = this._device.context.createProgram();\r\n    this._unitCounter = 0;\r\n    this._uniformSetters = null;\r\n    this._uniformInfo = null;\r\n    this._blockInfo = null;\r\n    this._error = '';\r\n    this._vertexShader = null;\r\n    this._fragmentShader = null;\r\n    this._vs = vertexShader;\r\n    this._fs = fragmentShader;\r\n    this._bindGroupLayouts = [...bindGroupLayouts];\r\n    this._vertexAttributes = [...vertexAttributes];\r\n    this.load();\r\n  }\r\n  get type(): 'render' | 'compute' {\r\n    return 'render';\r\n  }\r\n  getCompileError(): string {\r\n    return this._error;\r\n  }\r\n  getShaderSource(shaderType: ShaderType): string {\r\n    switch (shaderType) {\r\n      case ShaderType.Vertex: return this._vs;\r\n      case ShaderType.Fragment: return this._fs;\r\n      case ShaderType.Compute: return null;\r\n    }\r\n  }\r\n  getBindingInfo(name: string): BindPointInfo {\r\n    for (let group = 0; group < this._bindGroupLayouts.length; group++) {\r\n      const layout = this._bindGroupLayouts[group];\r\n      for (let binding = 0; binding < layout.entries.length; binding++) {\r\n        const bindingPoint = layout.entries[binding];\r\n        if (bindingPoint.name === name) {\r\n          return {\r\n            group: group,\r\n            binding: binding,\r\n            type: bindingPoint.type\r\n          };\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  get bindGroupLayouts(): BindGroupLayout[] {\r\n    return this._bindGroupLayouts;\r\n  }\r\n  get vertexAttributes(): number[] {\r\n    return this._vertexAttributes;\r\n  }\r\n  setUniform(name: string, value: IUniformValue | Record<string, IUniformValue> | IUniformValue[]) {\r\n    const setter = this._uniformSetters[name];\r\n    if (setter) {\r\n      setter(value as IUniformValue);\r\n    } else {\r\n      const proto = Object.getPrototypeOf(value);\r\n      if (proto === Object.getPrototypeOf({})) {\r\n        this._setUniformStruct(name, value as Record<string, IUniformValue>);\r\n      } else if (proto == Object.getPrototypeOf([])) {\r\n        this._setUniformArray(name, value as IUniformValue[]);\r\n      }\r\n    }\r\n  }\r\n  setBlock(name: string, value: WebGLStructuredBuffer, offset: number) {\r\n    const info = this._blockInfo[name];\r\n    if (info) {\r\n      if (offset) {\r\n        (this._device.context as WebGL2RenderingContext).bindBufferRange(WebGLEnum.UNIFORM_BUFFER, info.index, value.object, offset, value.byteLength - offset);\r\n      } else {\r\n        (this._device.context as WebGL2RenderingContext).bindBufferBase(WebGLEnum.UNIFORM_BUFFER, info.index, value.object);\r\n      }\r\n    }\r\n  }\r\n  destroy() {\r\n    if (this._object) {\r\n      this._device.context.deleteProgram(this._object);\r\n      this._object = null;\r\n      this._unitCounter = 0;\r\n      this._uniformSetters = null;\r\n      this._uniformInfo = null;\r\n      this._blockInfo = null;\r\n      this._error = '';\r\n      this._vertexShader = null;\r\n      this._fragmentShader = null;\r\n    }\r\n  }\r\n  async restore() {\r\n    if (!this._object && !this._device.isContextLost()) {\r\n      this.load();\r\n    }\r\n  }\r\n  isProgram(): boolean {\r\n    return true;\r\n  }\r\n  use(): boolean {\r\n    if (this !== this._device.context._currentProgram) {\r\n      if (!this.checkLoad()) {\r\n        return false;\r\n      }\r\n      this._device.context._currentProgram = this;\r\n      this._device.context.useProgram(this._object);\r\n    }\r\n    return true;\r\n  }\r\n  private _setUniformStruct(name: string, value: Record<string, IUniformValue>) {\r\n    for (const k in value) {\r\n      this.setUniform(`${name}.${k}`, value[k]);\r\n    }\r\n  }\r\n  private _setUniformArray(name: string, value: IUniformValue[]) {\r\n    for (let i = 0; i < value.length; i++) {\r\n      this.setUniform(`${name}[${i}]`, value[i]);\r\n    }\r\n  }\r\n  private load(): void {\r\n    if (this._device.isContextLost()) {\r\n      return;\r\n    }\r\n    const gl = this._device.context;\r\n    this._error = null;\r\n    this._uniformSetters = {};\r\n    if (!this._object) {\r\n      this._object = this._device.context.createProgram();\r\n    }\r\n    this._vertexShader = gl.createShader(WebGLEnum.VERTEX_SHADER);\r\n    gl.attachShader(this._object, this._vertexShader);\r\n    gl.shaderSource(this._vertexShader, this._vs);\r\n    gl.compileShader(this._vertexShader);\r\n    this._fragmentShader = gl.createShader(WebGLEnum.FRAGMENT_SHADER);\r\n    gl.attachShader(this._object, this._fragmentShader);\r\n    gl.shaderSource(this._fragmentShader, this._fs);\r\n    gl.compileShader(this._fragmentShader);\r\n    for (let loc = 0; loc < semanticList.length; loc++) {\r\n      gl.bindAttribLocation(this._object, loc, semanticList[loc]);\r\n    }\r\n    gl.linkProgram(this._object);\r\n  }\r\n  private checkLoad(): boolean {\r\n    if (!this._object) {\r\n      return false;\r\n    }\r\n    if (this._vertexShader) {\r\n      const gl = this._device.context;\r\n      if (!this._device.isContextLost()) {\r\n        if (!gl.getProgramParameter(this._object, WebGLEnum.LINK_STATUS)) {\r\n          if (!gl.getShaderParameter(this._vertexShader, WebGLEnum.COMPILE_STATUS)) {\r\n            this._error = gl.getShaderInfoLog(this._vertexShader);\r\n            console.error(new Error(`Compile shader failed: ${this._error}`));\r\n          } else if (!gl.getShaderParameter(this._fragmentShader, WebGLEnum.COMPILE_STATUS)) {\r\n            this._error = gl.getShaderInfoLog(this._fragmentShader);\r\n            console.error(new Error(`Compile shader failed: ${this._error}`));\r\n          } else {\r\n            this._error = gl.getProgramInfoLog(this._object);\r\n            console.error(new Error(`Load program failed: \\n${this._error}`));\r\n          }\r\n        }\r\n      }\r\n      gl.deleteShader(this._vertexShader);\r\n      this._vertexShader = null;\r\n      gl.deleteShader(this._fragmentShader);\r\n      this._fragmentShader = null;\r\n      if (this._error) {\r\n        gl.deleteProgram(this._object);\r\n        this._object = null;\r\n        return false;\r\n      }\r\n      this._uniformSetters = this.createUniformSetters();\r\n    }\r\n    return true;\r\n  }\r\n  private createUniformSetter(info: ProgramUniformInfo) {\r\n    const loc = info.location;\r\n    const isArray = info.isArray;\r\n    switch (info.type) {\r\n      case WebGLEnum.FLOAT:\r\n        return this.getUniformSetterfv(loc);\r\n      case WebGLEnum.FLOAT_VEC2:\r\n        return this.getUniformSetter2fv(loc);\r\n      case WebGLEnum.FLOAT_VEC3:\r\n        return this.getUniformSetter3fv(loc);\r\n      case WebGLEnum.FLOAT_VEC4:\r\n        return this.getUniformSetter4fv(loc);\r\n      case WebGLEnum.INT:\r\n        return this.getUniformSetteriv(loc);\r\n      case WebGLEnum.INT_VEC2:\r\n        return this.getUniformSetter2iv(loc);\r\n      case WebGLEnum.INT_VEC3:\r\n        return this.getUniformSetter3iv(loc);\r\n      case WebGLEnum.INT_VEC4:\r\n        return this.getUniformSetter4iv(loc);\r\n      case WebGLEnum.UNSIGNED_INT:\r\n        return this.getUniformSetteruiv(loc);\r\n      case WebGLEnum.UNSIGNED_INT_VEC2:\r\n        return this.getUniformSetter2uiv(loc);\r\n      case WebGLEnum.UNSIGNED_INT_VEC3:\r\n        return this.getUniformSetter3uiv(loc);\r\n      case WebGLEnum.UNSIGNED_INT_VEC4:\r\n        return this.getUniformSetter4uiv(loc);\r\n      case WebGLEnum.BOOL:\r\n        return this.getUniformSetteriv(loc);\r\n      case WebGLEnum.BOOL_VEC2:\r\n        return this.getUniformSetter2iv(loc);\r\n      case WebGLEnum.BOOL_VEC3:\r\n        return this.getUniformSetter3iv(loc);\r\n      case WebGLEnum.BOOL_VEC4:\r\n        return this.getUniformSetter4iv(loc);\r\n      case WebGLEnum.FLOAT_MAT2:\r\n        return this.getUniformSetterMatrix2(loc);\r\n      case WebGLEnum.FLOAT_MAT2x3:\r\n        return this.getUniformSetterMatrix23(loc);\r\n      case WebGLEnum.FLOAT_MAT2x4:\r\n        return this.getUniformSetterMatrix24(loc);\r\n      case WebGLEnum.FLOAT_MAT3:\r\n        return this.getUniformSetterMatrix3(loc);\r\n      case WebGLEnum.FLOAT_MAT3x2:\r\n        return this.getUniformSetterMatrix32(loc);\r\n      case WebGLEnum.FLOAT_MAT3x4:\r\n        return this.getUniformSetterMatrix34(loc);\r\n      case WebGLEnum.FLOAT_MAT4:\r\n        return this.getUniformSetterMatrix4(loc);\r\n      case WebGLEnum.FLOAT_MAT4x2:\r\n        return this.getUniformSetterMatrix42(loc);\r\n      case WebGLEnum.FLOAT_MAT4x3:\r\n        return this.getUniformSetterMatrix43(loc);\r\n      case WebGLEnum.SAMPLER_2D:\r\n      case WebGLEnum.SAMPLER_2D_SHADOW:\r\n      case WebGLEnum.INT_SAMPLER_2D:\r\n      case WebGLEnum.UNSIGNED_INT_SAMPLER_2D: {\r\n        const unit = this._unitCounter;\r\n        this._unitCounter += info.size;\r\n        return isArray\r\n          ? this.getSamplerArraySetter(loc, WebGLEnum.TEXTURE_2D, unit, info.size)\r\n          : this.getSamplerSetter(loc, WebGLEnum.TEXTURE_2D, unit);\r\n      }\r\n      case WebGLEnum.SAMPLER_2D_ARRAY:\r\n      case WebGLEnum.SAMPLER_2D_ARRAY_SHADOW:\r\n      case WebGLEnum.INT_SAMPLER_2D_ARRAY:\r\n      case WebGLEnum.UNSIGNED_INT_SAMPLER_2D_ARRAY: {\r\n        const unit = this._unitCounter;\r\n        this._unitCounter += info.size;\r\n        return isArray\r\n          ? this.getSamplerArraySetter(loc, WebGLEnum.TEXTURE_2D_ARRAY, unit, info.size)\r\n          : this.getSamplerSetter(loc, WebGLEnum.TEXTURE_2D_ARRAY, unit);\r\n      }\r\n      case WebGLEnum.SAMPLER_CUBE:\r\n      case WebGLEnum.SAMPLER_CUBE_SHADOW:\r\n      case WebGLEnum.INT_SAMPLER_CUBE:\r\n      case WebGLEnum.UNSIGNED_INT_SAMPLER_CUBE: {\r\n        const unit = this._unitCounter;\r\n        this._unitCounter += info.size;\r\n        return isArray\r\n          ? this.getSamplerArraySetter(loc, WebGLEnum.TEXTURE_CUBE_MAP, unit, info.size)\r\n          : this.getSamplerSetter(loc, WebGLEnum.TEXTURE_CUBE_MAP, unit);\r\n      }\r\n      case WebGLEnum.SAMPLER_3D:\r\n      case WebGLEnum.INT_SAMPLER_3D:\r\n      case WebGLEnum.UNSIGNED_INT_SAMPLER_3D: {\r\n        const unit = this._unitCounter;\r\n        this._unitCounter += info.size;\r\n        return isArray\r\n          ? this.getSamplerArraySetter(loc, WebGLEnum.TEXTURE_3D, unit, info.size)\r\n          : this.getSamplerSetter(loc, WebGLEnum.TEXTURE_3D, unit);\r\n      }\r\n      default: {\r\n        console.log(`Error: unknown uniform type: ${info.type}`);\r\n      }\r\n    }\r\n  }\r\n  private createUniformSetters() {\r\n    const uniformSetters = {};\r\n    const gl = this._device.context;\r\n    const numUniforms = gl.getProgramParameter(\r\n      this._object,\r\n      WebGLEnum.ACTIVE_UNIFORMS,\r\n    ) as number;\r\n\r\n    this._uniformInfo = [];\r\n    for (let index = 0; index < numUniforms; index++) {\r\n      const info = gl.getActiveUniform(this._object, index);\r\n      let name = info.name;\r\n      let isArray = false;\r\n      if (name.startsWith('gl_') || name.startsWith('webgl_')) {\r\n        this._uniformInfo.push(null);\r\n      } else {\r\n        if (name.substr(-3) === '[0]') {\r\n          // is array\r\n          name = name.substr(0, name.length - 3);\r\n          isArray = true;\r\n        }\r\n        const size = info.size;\r\n        const type = info.type;\r\n        const blockIndex = -1;\r\n        const offset = 0;\r\n        const location = gl.getUniformLocation(this._object, info.name);\r\n        const view = null;\r\n        const { ctor: viewCtor, elementSize: viewElementSize } = this.getTypedArrayInfo(info.type);\r\n        const uniformInfo = { index, name, size, type, blockIndex, offset, isArray, location, view, viewCtor, viewElementSize };\r\n        this._uniformInfo.push(uniformInfo);\r\n        if (location) {\r\n          uniformSetters[name] = this.createUniformSetter(uniformInfo);\r\n        }\r\n      }\r\n    }\r\n    if (isWebGL2(gl)) {\r\n      this._blockInfo = {};\r\n      const numBlocks = gl.getProgramParameter(this._object, WebGLEnum.ACTIVE_UNIFORM_BLOCKS) as number;\r\n      for (let i = 0; i < numBlocks; i++) {\r\n        const name = gl.getActiveUniformBlockName(this._object, i);\r\n        const index = gl.getUniformBlockIndex(this._object, name);\r\n        const usedInVS = !!gl.getActiveUniformBlockParameter(this._object, i, WebGLEnum.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER);\r\n        const usedInFS = !!gl.getActiveUniformBlockParameter(this._object, i, WebGLEnum.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER);\r\n        const used = usedInVS || usedInFS;\r\n        const size = gl.getActiveUniformBlockParameter(this._object, i, WebGLEnum.UNIFORM_BLOCK_DATA_SIZE) as number;\r\n        const uniformIndices = gl.getActiveUniformBlockParameter(this._object, i, WebGLEnum.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES) as Uint32Array;\r\n        this._blockInfo[name] = { index, used, size, uniformIndices };\r\n        gl.uniformBlockBinding(this._object, index, index);\r\n      }\r\n      /*\r\n      const indices: number[] = this._uniformInfo.map(val => val.index);\r\n      const types = gl.getActiveUniforms(this._object, indices, WebGLEnum.UNIFORM_TYPE);\r\n      const sizes = gl.getActiveUniforms(this._object, indices, WebGLEnum.UNIFORM_SIZE);\r\n      const blockIndices = gl.getActiveUniforms(this._object, indices, WebGLEnum.UNIFORM_BLOCK_INDEX);\r\n      const offsets = gl.getActiveUniforms(this._object, indices, WebGLEnum.UNIFORM_OFFSET);\r\n      this._uniformInfo.forEach((val, index) => {\r\n        val.type = types[index];\r\n        val.size = sizes[index];\r\n        val.blockIndex = blockIndices[index];\r\n        val.offset = offsets[index];\r\n      });\r\n      */\r\n    }\r\n    return uniformSetters;\r\n  }\r\n  private getUniformSetterf(location: WebGLUniformLocation) {\r\n    return (value: number) => {\r\n      this._device.context.uniform1f(location, value);\r\n    };\r\n  }\r\n  private getUniformSetterfv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform1fv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter2fv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform2fv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter3fv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform3fv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter4fv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform4fv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetteri(location: WebGLUniformLocation) {\r\n    return (value: number) => {\r\n      this._device.context.uniform1i(location, value);\r\n    };\r\n  }\r\n  private getUniformSetteriv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform1iv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter2iv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform2iv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter3iv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform3iv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter4iv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniform4iv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetterui(location: WebGLUniformLocation) {\r\n    return (value: number) => {\r\n      (this._device.context as WebGL2RenderingContext).uniform1ui(location, value);\r\n    };\r\n  }\r\n  private getUniformSetteruiv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniform1uiv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter2uiv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniform2uiv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter3uiv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniform3uiv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetter4uiv(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniform4uiv(location, (value.getArray && value.getArray()) || value);\r\n    };\r\n  }\r\n  private getUniformSetterMatrix2(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniformMatrix2fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix23(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniformMatrix2x3fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix24(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniformMatrix2x4fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix32(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniformMatrix3x2fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix3(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniformMatrix3fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix34(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniformMatrix3x4fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix42(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniformMatrix4x2fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix43(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      (this._device.context as WebGL2RenderingContext).uniformMatrix4x3fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getUniformSetterMatrix4(location: WebGLUniformLocation) {\r\n    return (value: any) => {\r\n      this._device.context.uniformMatrix4fv(\r\n        location,\r\n        false,\r\n        (value.getArray && value.getArray()) || value,\r\n      );\r\n    };\r\n  }\r\n  private getSamplerSetter(location: WebGLUniformLocation, target: number, unit: number) {\r\n    const gl = this._device.context;\r\n    return isWebGL2(gl) ? (texture: [WebGLBaseTexture, WebGLTextureSampler]) => {\r\n      gl.uniform1i(location, unit);\r\n      gl.activeTexture(this._device.context.TEXTURE0 + unit);\r\n      gl.bindTexture(target, texture?.[0]?.object || null);\r\n      gl.bindSampler(unit, texture?.[1]?.object || null);\r\n    } : (texture: [WebGLBaseTexture, WebGLTextureSampler]) => {\r\n      gl.uniform1i(location, unit);\r\n      gl.activeTexture(this._device.context.TEXTURE0 + unit);\r\n      gl.bindTexture(target, texture?.[0]?.object || null);\r\n    };\r\n  }\r\n  private getSamplerArraySetter(\r\n    location: WebGLUniformLocation,\r\n    target: number,\r\n    unit: number,\r\n    size: number,\r\n  ) {\r\n    const units = new Int32Array(size);\r\n    for (let i = 0; i < size; i++) {\r\n      units[i] = unit + i;\r\n    }\r\n    const gl = this._device.context;\r\n    return isWebGL2(gl)\r\n      ? (textures: Array<WebGLBaseTexture>) => {\r\n        gl.uniform1iv(location, units);\r\n        textures.forEach((texture, index) => {\r\n          gl.activeTexture(this._device.context.TEXTURE0 + units[index]);\r\n          gl.bindTexture(target, texture?.object || null);\r\n          gl.bindSampler(units[index], texture?.sampler.object || null);\r\n        });\r\n      }\r\n      : (textures: Array<WebGLBaseTexture>) => {\r\n        gl.uniform1iv(location, units);\r\n        textures.forEach((texture, index) => {\r\n          gl.activeTexture(this._device.context.TEXTURE0 + units[index]);\r\n          gl.bindTexture(target, texture?.object || null);\r\n        });\r\n      };\r\n  }\r\n  private getTypedArrayInfo(type: number): { ctor: TypedArrayConstructor<UniformBlockArray>, elementSize: number } {\r\n    let ctor: TypedArrayConstructor<UniformBlockArray> = null;\r\n    let elementSize = 0;\r\n    switch (type) {\r\n      case WebGLEnum.INT:\r\n        ctor = Int32Array;\r\n        elementSize = 4;\r\n        break;\r\n      case WebGLEnum.INT_VEC2:\r\n        ctor = Int32Array;\r\n        elementSize = 8;\r\n        break;\r\n      case WebGLEnum.INT_VEC3:\r\n        ctor = Int32Array;\r\n        elementSize = 12;\r\n        break;\r\n      case WebGLEnum.INT_VEC4:\r\n        ctor = Int32Array;\r\n        elementSize = 16;\r\n        break;\r\n      case WebGLEnum.UNSIGNED_INT:\r\n      case WebGLEnum.BOOL:\r\n        ctor = Uint32Array;\r\n        elementSize = 4;\r\n        break;\r\n      case WebGLEnum.UNSIGNED_INT_VEC2:\r\n      case WebGLEnum.BOOL_VEC2:\r\n        ctor = Uint32Array;\r\n        elementSize = 8;\r\n        break;\r\n      case WebGLEnum.UNSIGNED_INT_VEC3:\r\n      case WebGLEnum.BOOL_VEC3:\r\n        ctor = Uint32Array;\r\n        elementSize = 12;\r\n        break;\r\n      case WebGLEnum.UNSIGNED_INT_VEC4:\r\n      case WebGLEnum.BOOL_VEC4:\r\n        ctor = Uint32Array;\r\n        elementSize = 16;\r\n        break;\r\n      case WebGLEnum.FLOAT:\r\n        ctor = Float32Array;\r\n        elementSize = 4;\r\n        break;\r\n      case WebGLEnum.FLOAT_VEC2:\r\n        ctor = Float32Array;\r\n        elementSize = 8;\r\n        break;\r\n      case WebGLEnum.FLOAT_VEC3:\r\n        ctor = Float32Array;\r\n        elementSize = 12;\r\n        break;\r\n      case WebGLEnum.FLOAT_VEC4:\r\n      case WebGLEnum.FLOAT_MAT2:\r\n        ctor = Float32Array;\r\n        elementSize = 16;\r\n        break;\r\n      case WebGLEnum.FLOAT_MAT2x3:\r\n      case WebGLEnum.FLOAT_MAT3x2:\r\n        ctor = Float32Array;\r\n        elementSize = 24;\r\n        break;\r\n      case WebGLEnum.FLOAT_MAT2x4:\r\n      case WebGLEnum.FLOAT_MAT4x2:\r\n        ctor = Float32Array;\r\n        elementSize = 32;\r\n        break;\r\n      case WebGLEnum.FLOAT_MAT3:\r\n        ctor = Float32Array;\r\n        elementSize = 36;\r\n        break;\r\n      case WebGLEnum.FLOAT_MAT3x4:\r\n      case WebGLEnum.FLOAT_MAT4x3:\r\n        ctor = Float32Array;\r\n        elementSize = 48;\r\n        break;\r\n      case WebGLEnum.FLOAT_MAT4:\r\n        ctor = Float32Array;\r\n        elementSize = 64;\r\n        break;\r\n    }\r\n    return { ctor, elementSize };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}