{"version":3,"file":"constants_webgpu.js","sources":["../../../../../libs/device/src/device/webgpu/constants_webgpu.ts"],"sourcesContent":["import { zip } from '@sophon/base';\r\nimport { TextureFormat, PrimitiveType, TextureWrapping, TextureFilter, CompareFunc } from '../base_types';\r\nimport { StencilOp, FaceWinding, FaceMode, BlendEquation, BlendFunc } from '../render_states';\r\n\r\nexport const textureWrappingMap: {[k: number]: GPUAddressMode} = {\r\n  [TextureWrapping.Repeat]: 'repeat',\r\n  [TextureWrapping.MirroredRepeat]: 'mirror-repeat',\r\n  [TextureWrapping.ClampToEdge]: 'clamp-to-edge',\r\n};\r\n\r\nexport const textureFilterMap: {[k: number]: GPUFilterMode} = {\r\n  [TextureFilter.Nearest]: 'nearest',\r\n  [TextureFilter.Linear]: 'linear'\r\n};\r\n\r\nexport const compareFuncMap: {[k: number]: GPUCompareFunction} = {\r\n  [CompareFunc.Always]: 'always',\r\n  [CompareFunc.LessEqual]: 'less-equal',\r\n  [CompareFunc.GreaterEqual]: 'greater-equal',\r\n  [CompareFunc.Less]: 'less',\r\n  [CompareFunc.Greater]: 'greater',\r\n  [CompareFunc.Equal]: 'equal',\r\n  [CompareFunc.NotEqual]: 'not-equal',\r\n  [CompareFunc.Never]: 'never',\r\n};\r\n\r\nexport const stencilOpMap: {[k: number]: GPUStencilOperation} = {\r\n  [StencilOp.KEEP]: 'keep',\r\n  [StencilOp.REPLACE]: 'replace',\r\n  [StencilOp.ZERO]: 'zero',\r\n  [StencilOp.INVERT]: 'invert',\r\n  [StencilOp.INCR]: 'increment-clamp',\r\n  [StencilOp.DECR]: 'decrement-clamp',\r\n  [StencilOp.INCR_WRAP]: 'increment-wrap',\r\n  [StencilOp.DECR_WRAP]: 'decrement-wrap',\r\n};\r\n\r\nexport const primitiveTypeMap: {[k: number]: GPUPrimitiveTopology} = {\r\n  [PrimitiveType.TriangleList]: 'triangle-list',\r\n  [PrimitiveType.TriangleStrip]: 'triangle-strip',\r\n  [PrimitiveType.LineList]: 'line-list',\r\n  [PrimitiveType.LineStrip]: 'line-strip',\r\n  [PrimitiveType.PointList]: 'point-list',\r\n};\r\n\r\nexport const faceWindingMap: {[k: number]: GPUFrontFace} = {\r\n  [FaceWinding.CCW]: 'ccw',\r\n  [FaceWinding.CW]: 'cw',\r\n};\r\n\r\nexport const faceModeMap: {[k: number]: GPUCullMode} = {\r\n  [FaceMode.BACK]: 'back',\r\n  [FaceMode.FRONT]: 'front',\r\n  [FaceMode.NONE]: 'none',\r\n};\r\n\r\nexport const blendEquationMap: {[k: number]: GPUBlendOperation} = {\r\n  [BlendEquation.ADD]: 'add',\r\n  [BlendEquation.SUBTRACT]: 'subtract',\r\n  [BlendEquation.REVERSE_SUBTRACT]: 'reverse-subtract',\r\n  [BlendEquation.MIN]: 'min',\r\n  [BlendEquation.MAX]: 'max',\r\n};\r\n\r\nexport const blendFuncMap: {[k: number]: GPUBlendFactor} = {\r\n  [BlendFunc.CONSTANT_COLOR]: 'constant',\r\n  [BlendFunc.CONSTANT_ALPHA]: 'constant',\r\n  [BlendFunc.DST_COLOR]: 'dst',\r\n  [BlendFunc.DST_ALPHA]: 'dst-alpha',\r\n  [BlendFunc.INV_CONSTANT_COLOR]: 'one-minus-constant',\r\n  [BlendFunc.INV_CONSTANT_ALPHA]: 'one-minus-constant',\r\n  [BlendFunc.INV_DST_COLOR]: 'one-minus-dst',\r\n  [BlendFunc.INV_DST_ALPHA]: 'one-minus-dst-alpha',\r\n  [BlendFunc.SRC_COLOR]: 'src',\r\n  [BlendFunc.SRC_ALPHA]: 'src-alpha',\r\n  [BlendFunc.INV_SRC_COLOR]: 'one-minus-src',\r\n  [BlendFunc.INV_SRC_ALPHA]: 'one-minus-src-alpha',\r\n  [BlendFunc.SRC_ALPHA_SATURATE]: 'src-alpha-saturated',\r\n  [BlendFunc.ONE]: 'one',\r\n  [BlendFunc.ZERO]: 'zero',\r\n};\r\n\r\nexport const vertexFormatToHash : {[fmt: string]: string} = {\r\n  float32: '0',\r\n  float32x2: '1',\r\n  float32x3: '2',\r\n  float32x4: '3',\r\n  uint32: '4',\r\n  uint32x2: '5',\r\n  uint32x3: '6',\r\n  uint32x4: '7',\r\n  sint32: '8',\r\n  sint32x2: '9',\r\n  sint32x3: 'a',\r\n  sint32x4: 'b',\r\n  uint16x2: 'c',\r\n  uint16x4: 'd',\r\n  unorm16x2: 'e',\r\n  unorm16x4: 'f',\r\n  sint16x2: 'g',\r\n  sint16x4: 'h',\r\n  snorm16x2: 'i',\r\n  snorm16x4: 'j',\r\n  uint8x2: 'k',\r\n  uint8x4: 'l',\r\n  unorm8x2: 'm',\r\n  unorm8x4: 'n',\r\n  sint8x2: 'o',\r\n  sint8x4: 'p',\r\n  snorm8x2: 'q',\r\n  snorm8x4: 'r'\r\n};\r\n\r\nexport const textureFormatMap: {[fmt: number]: GPUTextureFormat} = {\r\n  [TextureFormat.RGBA8UNORM]: 'rgba8unorm',\r\n  [TextureFormat.RGBA8SNORM]: 'rgba8snorm',\r\n  [TextureFormat.BGRA8UNORM]: 'bgra8unorm',\r\n  [TextureFormat.DXT1]: 'bc1-rgba-unorm',\r\n  [TextureFormat.DXT3]: 'bc2-rgba-unorm',\r\n  [TextureFormat.DXT5]: 'bc3-rgba-unorm',\r\n  [TextureFormat.DXT1_SRGB]: 'bc1-rgba-unorm-srgb',\r\n  [TextureFormat.DXT3_SRGB]: 'bc2-rgba-unorm-srgb',\r\n  [TextureFormat.DXT5_SRGB]: 'bc3-rgba-unorm-srgb',\r\n  [TextureFormat.R8UNORM]: 'r8unorm',\r\n  [TextureFormat.R8SNORM]: 'r8snorm',\r\n  [TextureFormat.R16F]: 'r16float',\r\n  [TextureFormat.R32F]: 'r32float',\r\n  [TextureFormat.R8UI]: 'r8uint',\r\n  [TextureFormat.R8I]: 'r8sint',\r\n  [TextureFormat.R16UI]: 'r16uint',\r\n  [TextureFormat.R16I]: 'r16sint',\r\n  [TextureFormat.R32UI]: 'r32uint',\r\n  [TextureFormat.R32I]: 'r32sint',\r\n  [TextureFormat.RG8UNORM]: 'rg8unorm',\r\n  [TextureFormat.RG8SNORM]: 'rg8snorm',\r\n  [TextureFormat.RG16F]: 'rg16float',\r\n  [TextureFormat.RG32F]: 'rg32float',\r\n  [TextureFormat.RG8UI]: 'rg8uint',\r\n  [TextureFormat.RG8I]: 'rg8sint',\r\n  [TextureFormat.RG16UI]: 'rg16uint',\r\n  [TextureFormat.RG16I]: 'rg16sint',\r\n  [TextureFormat.RG32UI]: 'rg32uint',\r\n  [TextureFormat.RG32I]: 'rg32sint',\r\n  [TextureFormat.RGBA8UNORM_SRGB]: 'rgba8unorm-srgb',\r\n  [TextureFormat.BGRA8UNORM_SRGB]: 'bgra8unorm-srgb',\r\n  [TextureFormat.RGBA16F]: 'rgba16float',\r\n  [TextureFormat.RGBA32F]: 'rgba32float',\r\n  [TextureFormat.RGBA8UI]: 'rgba8uint',\r\n  [TextureFormat.RGBA8I]: 'rgba8sint',\r\n  [TextureFormat.RGBA16UI]: 'rgba16uint',\r\n  [TextureFormat.RGBA16I]: 'rgba16sint',\r\n  [TextureFormat.RGBA32UI]: 'rgba32uint',\r\n  [TextureFormat.RGBA32I]: 'rgba32sint',\r\n  [TextureFormat.D16]: 'depth16unorm',\r\n  [TextureFormat.D24]: 'depth24plus',\r\n  [TextureFormat.D32F]: 'depth32float',\r\n  [TextureFormat.D32FS8]: 'depth32float-stencil8',\r\n  [TextureFormat.D24S8]: 'depth24plus-stencil8',\r\n};\r\n\r\nexport const textureFormatInvMap = zip<TextureFormat>(Object.values(textureFormatMap), Object.keys(textureFormatMap).map(val => Number(val)));\r\n\r\nexport const hashToVertexFormat: {[hash: string]: string} = zip(Object.values(vertexFormatToHash), Object.keys(vertexFormatToHash));\r\n\r\n"],"names":[],"mappings":"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"}