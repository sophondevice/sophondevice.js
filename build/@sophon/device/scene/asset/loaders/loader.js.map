{"version":3,"file":"loader.js","sources":["../../../../../../libs/device/src/scene/asset/loaders/loader.ts"],"sourcesContent":["import type { BaseTexture } from \"../../../device\";\nimport type { AssetManager } from \"../assetmanager\";\nimport type { SharedModel } from \"../model\";\n\nexport class LoaderBase {\n  protected _urlResolver: (url: string) => string;\n  constructor() {\n    this._urlResolver = null;\n  }\n  get urlResolver(): (url: string) => string {\n    return this._urlResolver;\n  }\n  set urlResolver(resolver: (url: string) => string) {\n    this._urlResolver = resolver;\n  }\n  async request(url: string, headers: Record<string, string> = {}, crossOrigin = 'anonymous'): Promise<Response> {\n    url = this._urlResolver ? this._urlResolver(url) : null;\n    return url ? fetch(url, {\n      credentials: crossOrigin === 'anonymous' ? 'same-origin' : 'include',\n      headers: headers\n    }) : null;\n  }\n}\nexport abstract class AbstractTextureLoader extends LoaderBase {\n  abstract supportExtension(ext: string): boolean;\n  abstract supportMIMEType(mimeType: string): boolean;\n  abstract load(assetManager: AssetManager, url: string, mimeType: string, data: ArrayBuffer, srgb: boolean, noMipmap: boolean, texture?: BaseTexture): Promise<BaseTexture>;\n}\n\nexport abstract class AbstractModelLoader extends LoaderBase {\n  abstract supportExtension(ext: string): boolean;\n  abstract supportMIMEType(mimeType: string): boolean;\n  abstract load(assetManager: AssetManager, url: string, mimeType: string, data: Blob): Promise<SharedModel>;\n}\n\n"],"names":[],"mappings":";MAIa,UAAU,CAAA;AACX,IAAA,YAAY,CAA0B;AAChD,IAAA,WAAA,GAAA;AACE,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC1B;AACD,IAAA,IAAI,WAAW,GAAA;QACb,OAAO,IAAI,CAAC,YAAY,CAAC;KAC1B;IACD,IAAI,WAAW,CAAC,QAAiC,EAAA;AAC/C,QAAA,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;KAC9B;IACD,MAAM,OAAO,CAAC,GAAW,EAAE,UAAkC,EAAE,EAAE,WAAW,GAAG,WAAW,EAAA;AACxF,QAAA,GAAG,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;AACxD,QAAA,OAAO,GAAG,GAAG,KAAK,CAAC,GAAG,EAAE;YACtB,WAAW,EAAE,WAAW,KAAK,WAAW,GAAG,aAAa,GAAG,SAAS;AACpE,YAAA,OAAO,EAAE,OAAO;AACjB,SAAA,CAAC,GAAG,IAAI,CAAC;KACX;AACF,CAAA;AACK,MAAgB,qBAAsB,SAAQ,UAAU,CAAA;AAI7D,CAAA;AAEK,MAAgB,mBAAoB,SAAQ,UAAU,CAAA;AAI3D;;;;"}