{"version":3,"file":"loader.js","sources":["../../../../../../libs/device/src/scene/asset/loaders/loader.ts"],"sourcesContent":["import type { BaseTexture } from \"../../../device\";\r\nimport type { AssetManager } from \"../assetmanager\";\r\nimport type { SharedModel } from \"../model\";\r\n\r\nexport class LoaderBase {\r\n  protected _urlResolver: (url: string) => string;\r\n  constructor() {\r\n    this._urlResolver = null;\r\n  }\r\n  get urlResolver(): (url: string) => string {\r\n    return this._urlResolver;\r\n  }\r\n  set urlResolver(resolver: (url: string) => string) {\r\n    this._urlResolver = resolver;\r\n  }\r\n  async request(url: string, headers: Record<string, string> = {}, crossOrigin = 'anonymous'): Promise<Response> {\r\n    url = this._urlResolver ? this._urlResolver(url) : null;\r\n    return url ? fetch(url, {\r\n      credentials: crossOrigin === 'anonymous' ? 'same-origin' : 'include',\r\n      headers: headers\r\n    }) : null;\r\n  }\r\n}\r\nexport abstract class AbstractTextureLoader extends LoaderBase {\r\n  abstract supportExtension(ext: string): boolean;\r\n  abstract supportMIMEType(mimeType: string): boolean;\r\n  abstract load(assetManager: AssetManager, url: string, mimeType: string, data: ArrayBuffer, srgb: boolean, noMipmap: boolean, texture?: BaseTexture): Promise<BaseTexture>;\r\n}\r\n\r\nexport abstract class AbstractModelLoader extends LoaderBase {\r\n  abstract supportExtension(ext: string): boolean;\r\n  abstract supportMIMEType(mimeType: string): boolean;\r\n  abstract load(assetManager: AssetManager, url: string, mimeType: string, data: Blob): Promise<SharedModel>;\r\n}\r\n\r\n"],"names":[],"mappings":";MAIa,UAAU,CAAA;AACX,IAAA,YAAY,CAA0B;AAChD,IAAA,WAAA,GAAA;AACE,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC1B;AACD,IAAA,IAAI,WAAW,GAAA;QACb,OAAO,IAAI,CAAC,YAAY,CAAC;KAC1B;IACD,IAAI,WAAW,CAAC,QAAiC,EAAA;AAC/C,QAAA,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;KAC9B;IACD,MAAM,OAAO,CAAC,GAAW,EAAE,UAAkC,EAAE,EAAE,WAAW,GAAG,WAAW,EAAA;AACxF,QAAA,GAAG,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;AACxD,QAAA,OAAO,GAAG,GAAG,KAAK,CAAC,GAAG,EAAE;YACtB,WAAW,EAAE,WAAW,KAAK,WAAW,GAAG,aAAa,GAAG,SAAS;AACpE,YAAA,OAAO,EAAE,OAAO;AACjB,SAAA,CAAC,GAAG,IAAI,CAAC;KACX;AACF,CAAA;AACK,MAAgB,qBAAsB,SAAQ,UAAU,CAAA;AAI7D,CAAA;AAEK,MAAgB,mBAAoB,SAAQ,UAAU,CAAA;AAI3D;;;;"}