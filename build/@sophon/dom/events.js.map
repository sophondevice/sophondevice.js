{"version":3,"file":"events.js","sources":["../../../libs/dom/src/events.ts"],"sourcesContent":["import { REvent } from '@sophon/base';\r\nimport type { RNode } from './node';\r\nimport type { RPrimitiveBatchList } from './primitive';\r\n\r\nexport class RResizeEvent extends REvent {\r\n  static readonly NAME = 'resize';\r\n  constructor() {\r\n    super(RResizeEvent.NAME, false, false);\r\n  }\r\n}\r\n\r\nexport class RMouseEvent extends REvent {\r\n  static readonly NAME_RENDERER_MOUSEDOWN = 'renderermousedown';\r\n  static readonly NAME_RENDERER_MOUSEUP = 'renderermouseup';\r\n  static readonly NAME_RENDERER_MOUSEMOVE = 'renderermousemove';\r\n  static readonly NAME_RENDERER_MOUSECLICK = 'rendererclick';\r\n  static readonly NAME_RENDERER_MOUSEDBLCLICK = 'rendererdblclick';\r\n  static readonly NAME_RENDERER_MOUSEWHEEL = 'renderermousewheel';\r\n  static readonly NAME_RENDERER_DRAGENTER = 'rendererdragenter';\r\n  static readonly NAME_RENDERER_DRAGOVER = 'rendererdragover';\r\n  static readonly NAME_RENDERER_DRAGDROP = 'rendererdragdrop';\r\n  static readonly NAME_MOUSEDOWN = 'mousedown';\r\n  static readonly NAME_MOUSEUP = 'mouseup';\r\n  static readonly NAME_MOUSEMOVE = 'mousemove';\r\n  static readonly NAME_MOUSECLICK = 'click';\r\n  static readonly NAME_MOUSEDBLCLICK = 'dblclick';\r\n  static readonly NAME_MOUSEWHEEL = 'wheel';\r\n  static readonly NAME_MOUSEENTER = 'mouseenter';\r\n  static readonly NAME_MOUSELEAVE = 'mouseleave';\r\n  static readonly NAME_MOUSEOVER = 'mouseover';\r\n  static readonly NAME_MOUSEOUT = 'mouseout';\r\n  x: number;\r\n  y: number;\r\n  offsetX: number;\r\n  offsetY: number;\r\n  button: number;\r\n  buttons: number;\r\n  wheelDeltaX: number;\r\n  wheelDeltaY: number;\r\n  ctrlKey: boolean;\r\n  shiftKey: boolean;\r\n  altKey: boolean;\r\n  metaKey: boolean;\r\n  relatedTarget: unknown;\r\n  constructor(\r\n    type: string,\r\n    x: number,\r\n    y: number,\r\n    offsetX: number,\r\n    offsetY: number,\r\n    button: number,\r\n    buttons: number,\r\n    wheelDeltaX: number,\r\n    wheelDeltaY: number,\r\n    ctrlKey: boolean,\r\n    shiftKey: boolean,\r\n    altKey: boolean,\r\n    metaKey: boolean,\r\n  ) {\r\n    super(type, type !== RMouseEvent.NAME_MOUSEENTER && type !== RMouseEvent.NAME_MOUSELEAVE, true);\r\n    this.relatedTarget = null;\r\n    this.init(x, y, offsetX, offsetY, button, buttons, wheelDeltaX, wheelDeltaY, ctrlKey, shiftKey, altKey, metaKey);\r\n  }\r\n  init(\r\n    x: number,\r\n    y: number,\r\n    offsetX: number,\r\n    offsetY: number,\r\n    button: number,\r\n    buttons: number,\r\n    wheelDeltaX: number,\r\n    wheelDeltaY: number,\r\n    ctrlKey: boolean,\r\n    shiftKey: boolean,\r\n    altKey: boolean,\r\n    metaKey: boolean,\r\n  ) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.offsetX = offsetX;\r\n    this.offsetY = offsetY;\r\n    this.button = button;\r\n    this.buttons = buttons;\r\n    this.wheelDeltaX = wheelDeltaX;\r\n    this.wheelDeltaY = wheelDeltaY;\r\n    this.ctrlKey = ctrlKey;\r\n    this.shiftKey = shiftKey;\r\n    this.altKey = altKey;\r\n    this.metaKey = metaKey;\r\n  }\r\n}\r\n\r\nexport class RDragEvent extends RMouseEvent {\r\n  static readonly NAME_DRAG = 'drag';\r\n  static readonly NAME_DRAGSTART = 'dragstart';\r\n  static readonly NAME_DRAGEND = 'dragend';\r\n  static readonly NAME_DRAGOVER = 'dragover';\r\n  static readonly NAME_DRAGENTER = 'dragenter';\r\n  static readonly NAME_DRAGLEAVE = 'dragleave';\r\n  static readonly NAME_DRAGDROP = 'drop';\r\n  dataTransfer: DataTransfer;\r\n  constructor(\r\n    type: string,\r\n    x: number,\r\n    y: number,\r\n    offsetX: number,\r\n    offsetY: number,\r\n    button: number,\r\n    buttons: number,\r\n    ctrlKey: boolean,\r\n    shiftKey: boolean,\r\n    altKey: boolean,\r\n    metaKey: boolean,\r\n    dataTransfer: DataTransfer,\r\n  ) {\r\n    super(type, x, y, offsetX, offsetY, button, buttons, 0, 0, ctrlKey, shiftKey, altKey, metaKey);\r\n    this.dataTransfer = dataTransfer;\r\n  }\r\n}\r\n\r\nexport class RKeyEvent extends REvent {\r\n  static readonly NAME_RENDERER_KEYDOWN = 'rendererkeydown';\r\n  static readonly NAME_RENDERER_KEYUP = 'rendererkeyup';\r\n  static readonly NAME_RENDERER_KEYPRESS = 'rendererkeypress';\r\n  static readonly NAME_KEYDOWN = 'keydown';\r\n  static readonly NAME_KEYUP = 'keyup';\r\n  static readonly NAME_KEYPRESS = 'keypress';\r\n  code: string;\r\n  key: string;\r\n  repeat: boolean;\r\n  ctrlKey: boolean;\r\n  shiftKey: boolean;\r\n  altKey: boolean;\r\n  metaKey: boolean;\r\n  constructor(\r\n    type: string,\r\n    code: string,\r\n    key: string,\r\n    repeat: boolean,\r\n    ctrlKey: boolean,\r\n    shiftKey: boolean,\r\n    altKey: boolean,\r\n    metaKey: boolean,\r\n  ) {\r\n    super(type, true, true);\r\n    this.code = code;\r\n    this.key = key;\r\n    this.repeat = repeat;\r\n    this.ctrlKey = ctrlKey;\r\n    this.shiftKey = shiftKey;\r\n    this.altKey = altKey;\r\n    this.metaKey = metaKey;\r\n  }\r\n}\r\n\r\nexport class RFocusEvent extends REvent {\r\n  static readonly NAME_FOCUS = 'focus';\r\n  static readonly NAME_BLUR = 'blur';\r\n  constructor(type: string) {\r\n    super(type, false, false);\r\n  }\r\n}\r\n\r\nexport class RElementLayoutEvent extends REvent {\r\n  static readonly NAME = 'layout';\r\n  constructor() {\r\n    super(RElementLayoutEvent.NAME, false, false);\r\n  }\r\n}\r\n\r\nexport class RElementDrawEvent extends REvent {\r\n  static readonly NAME = 'draw';\r\n  constructor() {\r\n    super(RElementDrawEvent.NAME, false, false);\r\n  }\r\n}\r\n\r\nexport class RElementBuildContentEvent extends REvent {\r\n  static readonly NAME_PREBUILD = 'prebuildcontent';\r\n  static readonly NAME_POSTBUILD = 'postbuildcontent';\r\n  batchList: RPrimitiveBatchList;\r\n  constructor(type: string, batchList: RPrimitiveBatchList) {\r\n    super(type, false, false);\r\n    this.batchList = batchList;\r\n  }\r\n}\r\n\r\nexport class RTextEvent extends REvent {\r\n  static readonly NAME_CONTENT_CHANGE = 'textcontentchange';\r\n  static readonly NAME_FONT_CHANGE = 'textfontchange';\r\n  constructor(type: string) {\r\n    super(type, false, false);\r\n  }\r\n}\r\n\r\nexport class RValueChangeEvent extends REvent {\r\n  static readonly NAME = 'valuechange';\r\n  value: number;\r\n  constructor(value: number) {\r\n    super(RValueChangeEvent.NAME, false, false);\r\n    this.value = value;\r\n  }\r\n}\r\n\r\nexport class RAttributeChangeEvent extends REvent {\r\n  static readonly NAME = 'attributechange';\r\n  name: string;\r\n  removed: boolean;\r\n  constructor(name: string, removed: boolean) {\r\n    super(RAttributeChangeEvent.NAME, false, false);\r\n    this.name = name;\r\n    this.removed = removed;\r\n  }\r\n}\r\n\r\nexport class RTextContentChangeEvent extends REvent {\r\n  static readonly NAME = 'elementtextcontentchange';\r\n  constructor() {\r\n    super(RTextContentChangeEvent.NAME, true, true);\r\n  }\r\n}\r\n\r\nexport class RChangeEvent extends REvent {\r\n  static readonly NAME = 'change';\r\n  constructor() {\r\n    super(RChangeEvent.NAME, true, false);\r\n  }\r\n}\r\n\r\nexport class RDOMTreeEvent extends REvent {\r\n  static readonly NAME_INSERTED = 'elementinserted';\r\n  static readonly NAME_REMOVED = 'elementremoved';\r\n  static readonly NAME_FOCUSED = 'elementfocused';\r\n  parent: RNode;\r\n  node: RNode;\r\n  constructor(type: string, parent: RNode, node: RNode) {\r\n    super(type, type !== RDOMTreeEvent.NAME_FOCUSED, type !== RDOMTreeEvent.NAME_FOCUSED);\r\n    this.parent = parent;\r\n    this.node = node;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}