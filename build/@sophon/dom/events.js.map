{"version":3,"file":"events.js","sources":["../../../libs/dom/src/events.ts"],"sourcesContent":["import { REvent } from '@sophon/base';\nimport type { RNode } from './node';\nimport type { RPrimitiveBatchList } from './primitive';\n\nexport class RResizeEvent extends REvent {\n  static readonly NAME = 'resize';\n  constructor() {\n    super(RResizeEvent.NAME, false, false);\n  }\n}\n\nexport class RMouseEvent extends REvent {\n  static readonly NAME_RENDERER_MOUSEDOWN = 'renderermousedown';\n  static readonly NAME_RENDERER_MOUSEUP = 'renderermouseup';\n  static readonly NAME_RENDERER_MOUSEMOVE = 'renderermousemove';\n  static readonly NAME_RENDERER_MOUSECLICK = 'rendererclick';\n  static readonly NAME_RENDERER_MOUSEDBLCLICK = 'rendererdblclick';\n  static readonly NAME_RENDERER_MOUSEWHEEL = 'renderermousewheel';\n  static readonly NAME_RENDERER_DRAGENTER = 'rendererdragenter';\n  static readonly NAME_RENDERER_DRAGOVER = 'rendererdragover';\n  static readonly NAME_RENDERER_DRAGDROP = 'rendererdragdrop';\n  static readonly NAME_MOUSEDOWN = 'mousedown';\n  static readonly NAME_MOUSEUP = 'mouseup';\n  static readonly NAME_MOUSEMOVE = 'mousemove';\n  static readonly NAME_MOUSECLICK = 'click';\n  static readonly NAME_MOUSEDBLCLICK = 'dblclick';\n  static readonly NAME_MOUSEWHEEL = 'wheel';\n  static readonly NAME_MOUSEENTER = 'mouseenter';\n  static readonly NAME_MOUSELEAVE = 'mouseleave';\n  static readonly NAME_MOUSEOVER = 'mouseover';\n  static readonly NAME_MOUSEOUT = 'mouseout';\n  x: number;\n  y: number;\n  offsetX: number;\n  offsetY: number;\n  button: number;\n  buttons: number;\n  wheelDeltaX: number;\n  wheelDeltaY: number;\n  ctrlKey: boolean;\n  shiftKey: boolean;\n  altKey: boolean;\n  metaKey: boolean;\n  relatedTarget: unknown;\n  constructor(\n    type: string,\n    x: number,\n    y: number,\n    offsetX: number,\n    offsetY: number,\n    button: number,\n    buttons: number,\n    wheelDeltaX: number,\n    wheelDeltaY: number,\n    ctrlKey: boolean,\n    shiftKey: boolean,\n    altKey: boolean,\n    metaKey: boolean,\n  ) {\n    super(type, type !== RMouseEvent.NAME_MOUSEENTER && type !== RMouseEvent.NAME_MOUSELEAVE, true);\n    this.relatedTarget = null;\n    this.init(x, y, offsetX, offsetY, button, buttons, wheelDeltaX, wheelDeltaY, ctrlKey, shiftKey, altKey, metaKey);\n  }\n  init(\n    x: number,\n    y: number,\n    offsetX: number,\n    offsetY: number,\n    button: number,\n    buttons: number,\n    wheelDeltaX: number,\n    wheelDeltaY: number,\n    ctrlKey: boolean,\n    shiftKey: boolean,\n    altKey: boolean,\n    metaKey: boolean,\n  ) {\n    this.x = x;\n    this.y = y;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    this.button = button;\n    this.buttons = buttons;\n    this.wheelDeltaX = wheelDeltaX;\n    this.wheelDeltaY = wheelDeltaY;\n    this.ctrlKey = ctrlKey;\n    this.shiftKey = shiftKey;\n    this.altKey = altKey;\n    this.metaKey = metaKey;\n  }\n}\n\nexport class RDragEvent extends RMouseEvent {\n  static readonly NAME_DRAG = 'drag';\n  static readonly NAME_DRAGSTART = 'dragstart';\n  static readonly NAME_DRAGEND = 'dragend';\n  static readonly NAME_DRAGOVER = 'dragover';\n  static readonly NAME_DRAGENTER = 'dragenter';\n  static readonly NAME_DRAGLEAVE = 'dragleave';\n  static readonly NAME_DRAGDROP = 'drop';\n  dataTransfer: DataTransfer;\n  constructor(\n    type: string,\n    x: number,\n    y: number,\n    offsetX: number,\n    offsetY: number,\n    button: number,\n    buttons: number,\n    ctrlKey: boolean,\n    shiftKey: boolean,\n    altKey: boolean,\n    metaKey: boolean,\n    dataTransfer: DataTransfer,\n  ) {\n    super(type, x, y, offsetX, offsetY, button, buttons, 0, 0, ctrlKey, shiftKey, altKey, metaKey);\n    this.dataTransfer = dataTransfer;\n  }\n}\n\nexport class RKeyEvent extends REvent {\n  static readonly NAME_RENDERER_KEYDOWN = 'rendererkeydown';\n  static readonly NAME_RENDERER_KEYUP = 'rendererkeyup';\n  static readonly NAME_RENDERER_KEYPRESS = 'rendererkeypress';\n  static readonly NAME_KEYDOWN = 'keydown';\n  static readonly NAME_KEYUP = 'keyup';\n  static readonly NAME_KEYPRESS = 'keypress';\n  code: string;\n  key: string;\n  repeat: boolean;\n  ctrlKey: boolean;\n  shiftKey: boolean;\n  altKey: boolean;\n  metaKey: boolean;\n  constructor(\n    type: string,\n    code: string,\n    key: string,\n    repeat: boolean,\n    ctrlKey: boolean,\n    shiftKey: boolean,\n    altKey: boolean,\n    metaKey: boolean,\n  ) {\n    super(type, true, true);\n    this.code = code;\n    this.key = key;\n    this.repeat = repeat;\n    this.ctrlKey = ctrlKey;\n    this.shiftKey = shiftKey;\n    this.altKey = altKey;\n    this.metaKey = metaKey;\n  }\n}\n\nexport class RFocusEvent extends REvent {\n  static readonly NAME_FOCUS = 'focus';\n  static readonly NAME_BLUR = 'blur';\n  constructor(type: string) {\n    super(type, false, false);\n  }\n}\n\nexport class RElementLayoutEvent extends REvent {\n  static readonly NAME = 'layout';\n  constructor() {\n    super(RElementLayoutEvent.NAME, false, false);\n  }\n}\n\nexport class RElementDrawEvent extends REvent {\n  static readonly NAME = 'draw';\n  constructor() {\n    super(RElementDrawEvent.NAME, false, false);\n  }\n}\n\nexport class RElementBuildContentEvent extends REvent {\n  static readonly NAME_PREBUILD = 'prebuildcontent';\n  static readonly NAME_POSTBUILD = 'postbuildcontent';\n  batchList: RPrimitiveBatchList;\n  constructor(type: string, batchList: RPrimitiveBatchList) {\n    super(type, false, false);\n    this.batchList = batchList;\n  }\n}\n\nexport class RTextEvent extends REvent {\n  static readonly NAME_CONTENT_CHANGE = 'textcontentchange';\n  static readonly NAME_FONT_CHANGE = 'textfontchange';\n  constructor(type: string) {\n    super(type, false, false);\n  }\n}\n\nexport class RValueChangeEvent extends REvent {\n  static readonly NAME = 'valuechange';\n  value: number;\n  constructor(value: number) {\n    super(RValueChangeEvent.NAME, false, false);\n    this.value = value;\n  }\n}\n\nexport class RAttributeChangeEvent extends REvent {\n  static readonly NAME = 'attributechange';\n  name: string;\n  removed: boolean;\n  constructor(name: string, removed: boolean) {\n    super(RAttributeChangeEvent.NAME, false, false);\n    this.name = name;\n    this.removed = removed;\n  }\n}\n\nexport class RTextContentChangeEvent extends REvent {\n  static readonly NAME = 'elementtextcontentchange';\n  constructor() {\n    super(RTextContentChangeEvent.NAME, true, true);\n  }\n}\n\nexport class RChangeEvent extends REvent {\n  static readonly NAME = 'change';\n  constructor() {\n    super(RChangeEvent.NAME, true, false);\n  }\n}\n\nexport class RDOMTreeEvent extends REvent {\n  static readonly NAME_INSERTED = 'elementinserted';\n  static readonly NAME_REMOVED = 'elementremoved';\n  static readonly NAME_FOCUSED = 'elementfocused';\n  parent: RNode;\n  node: RNode;\n  constructor(type: string, parent: RNode, node: RNode) {\n    super(type, type !== RDOMTreeEvent.NAME_FOCUSED, type !== RDOMTreeEvent.NAME_FOCUSED);\n    this.parent = parent;\n    this.node = node;\n  }\n}\n"],"names":[],"mappings":"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"}