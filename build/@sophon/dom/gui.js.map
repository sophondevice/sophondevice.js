{"version":3,"file":"gui.js","sources":["../../../libs/dom/src/gui.ts"],"sourcesContent":["import { REvent, REventTarget } from '@sophon/base';\r\nimport * as Yoga from './typeflex/api';\r\nimport { injectGUIEvents, GUIRenderer } from './renderer';\r\nimport { RColor, GUIEventPathBuilder } from './types';\r\nimport { GlyphManager, IGlyphInfo } from './glyph_manager';\r\nimport { ImageManager } from './image_manager';\r\nimport { GUIHitTestVisitor } from './hittest_visitor';\r\nimport { UILayout, UIRect } from './layout';\r\nimport { RNode } from './node';\r\nimport { RText } from './components/text';\r\nimport { RDocument } from './document';\r\nimport { IStyleSheet, parseStyleSheet } from './style';\r\nimport { RDOMTreeEvent, RMouseEvent, RDragEvent, RKeyEvent, RFocusEvent } from './events';\r\nimport { RSelector, Rule } from './selector';\r\nimport { DummyElement } from './dummy_element';\r\nimport { RElement } from './element';\r\nimport { Input } from './components/input';\r\nimport { StyleElement } from './style_element';\r\nimport { RFlowElement } from './flow_element';\r\nimport { Button } from './components/button';\r\nimport { ScrollBar } from './components/scrollbar';\r\nimport { Option, Select } from './components/select';\r\nimport { Slider } from './components/slider';\r\nimport type { Texture2D, AssetManager } from '@sophon/device';\r\nimport type { Font } from './font';\r\nimport type { RPrimitiveBatchList } from './primitive';\r\n\r\ninterface IElementConstructor {\r\n  new(gui: GUI, ...args: unknown[]): RElement;\r\n}\r\n\r\nclass DrawVisitor {\r\n  private _renderer: GUIRenderer;\r\n  private _drawDragImage: boolean;\r\n  private _gui: GUI;\r\n  constructor(gui: GUI) {\r\n    this._gui = gui;\r\n    this._renderer = gui.renderer;\r\n    this._drawDragImage = false;\r\n  }\r\n  beginTraverse() { }\r\n  beginTraverseNode(w: RNode) {\r\n    const dragSession = this._gui.getDragSession();\r\n    if (\r\n      dragSession &&\r\n      dragSession.started &&\r\n      w === dragSession.node &&\r\n      dragSession.dragImage.length === 0\r\n    ) {\r\n      this._drawDragImage = true;\r\n    }\r\n  }\r\n  endTraverseNode(w: RNode) {\r\n    if (this._drawDragImage) {\r\n      const dragSession = this._gui.getDragSession();\r\n      if (dragSession && dragSession.node === w) {\r\n        this._drawDragImage = false;\r\n      }\r\n    }\r\n  }\r\n  endTraverse() {\r\n    const dragSession = this._gui.getDragSession();\r\n    if (dragSession && dragSession.started) {\r\n      const offsetX = this._gui.mouseX - dragSession.startX;\r\n      const offsetY = this._gui.mouseY - dragSession.startY;\r\n      for (const batchList of dragSession.dragImage) {\r\n        // TODO: optimize this (avoid vertices rebuilding by using material uniform)\r\n        const x = batchList.x;\r\n        const y = batchList.y;\r\n        batchList.x += offsetX;\r\n        batchList.y += offsetY;\r\n        this._gui._drawBatchList(batchList);\r\n        batchList.x = x;\r\n        batchList.y = y;\r\n      }\r\n    }\r\n  }\r\n  visitNode(w: RNode) {\r\n    w.draw(this._renderer);\r\n    if (this._drawDragImage) {\r\n      this._gui.getDragSession().dragImage.push(\r\n        w.batchList.clone({\r\n          colorTransformFunc: (c) => {\r\n            return { r: c.r, g: c.g, b: c.b, a: c.a * 0.5 };\r\n          },\r\n        }),\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport class ElementRegistry {\r\n  /** @internal */\r\n  private _constructors: { [tagname: string]: IElementConstructor };\r\n  constructor(tags?: { [tagname: string]: IElementConstructor }) {\r\n    this._constructors = {};\r\n    if (tags) {\r\n      for (const tag in tags) {\r\n        this.register(tags[tag], tag);\r\n      }\r\n    }\r\n  }\r\n  register(ctor: IElementConstructor, tagName: string) {\r\n    console.assert(!!ctor, 'Failed to register element type with null constructor');\r\n    console.assert(!!tagName, 'Failed to register element type with null tag name getter');\r\n    if (typeof tagName === 'string') {\r\n      console.assert(\r\n        !this._constructors[tagName],\r\n        'Failed to register element type: tagname already registered');\r\n      this._constructors[tagName] = ctor;\r\n    }\r\n  }\r\n  createElement(gui: GUI, tagName: string): RElement {\r\n    const ctor = this._constructors[tagName] || this._constructors['div'];\r\n    const el = new ctor(gui);\r\n    el._setTagName(tagName);\r\n    return el;\r\n  }\r\n}\r\n\r\nconst elementRegistry = new ElementRegistry({\r\n  link: DummyElement,\r\n  head: DummyElement,\r\n  meta: DummyElement,\r\n  div: RElement,\r\n  html: RFlowElement,\r\n  body: RFlowElement,\r\n  style: StyleElement,\r\n  button: Button,\r\n  input: Input,\r\n  scrollbar: ScrollBar,\r\n  option: Option,\r\n  select: Select,\r\n  slider: Slider,\r\n});\r\n\r\nconst deviceMouseEvents = {\r\n  [RMouseEvent.NAME_RENDERER_MOUSEDOWN]: RMouseEvent.NAME_MOUSEDOWN,\r\n  [RMouseEvent.NAME_RENDERER_MOUSEUP]: RMouseEvent.NAME_MOUSEUP,\r\n  [RMouseEvent.NAME_RENDERER_MOUSEMOVE]: RMouseEvent.NAME_MOUSEMOVE,\r\n  [RMouseEvent.NAME_RENDERER_MOUSECLICK]: RMouseEvent.NAME_MOUSECLICK,\r\n  [RMouseEvent.NAME_RENDERER_MOUSEDBLCLICK]: RMouseEvent.NAME_MOUSEDBLCLICK,\r\n  [RMouseEvent.NAME_RENDERER_MOUSEWHEEL]: RMouseEvent.NAME_MOUSEWHEEL,\r\n};\r\n\r\nconst deviceKeyEvents = {\r\n  [RKeyEvent.NAME_RENDERER_KEYDOWN]: RKeyEvent.NAME_KEYDOWN,\r\n  [RKeyEvent.NAME_RENDERER_KEYUP]: RKeyEvent.NAME_KEYUP,\r\n  [RKeyEvent.NAME_RENDERER_KEYPRESS]: RKeyEvent.NAME_KEYPRESS,\r\n};\r\n\r\nconst DRAG_DISTANCE = 4;\r\nconst DRAGOVER_INTERVAL = 100;\r\n\r\nclass DragSession {\r\n  node: RNode;\r\n  overNode: RNode;\r\n  startX: number;\r\n  startY: number;\r\n  dataTransfer: DataTransfer;\r\n  timer: number;\r\n  started: boolean;\r\n  cachedDragOverEvent: RDragEvent;\r\n  dragImage: RPrimitiveBatchList[];\r\n  gui: GUI;\r\n  constructor(gui: GUI, node: RNode, x: number, y: number) {\r\n    this.node = node;\r\n    this.overNode = null;\r\n    this.startX = x;\r\n    this.startY = y;\r\n    this.dataTransfer = null;\r\n    this.timer = null;\r\n    this.started = false;\r\n    this.cachedDragOverEvent = null;\r\n    this.dragImage = null;\r\n    this.gui = gui;\r\n  }\r\n  update(): boolean {\r\n    if (\r\n      (!this.started && Math.abs(this.gui.mouseX - this.startX) >= DRAG_DISTANCE) ||\r\n      Math.abs(this.gui.mouseY - this.startY) >= DRAG_DISTANCE\r\n    ) {\r\n      if (!this.start(this.gui.mouseX, this.gui.mouseY, new DataTransfer())) {\r\n        return false;\r\n      }\r\n    }\r\n    if (this.started) {\r\n      const hover = this.gui.getHover();\r\n      if (hover.element !== this.overNode) {\r\n        if (this.overNode) {\r\n          const p = this.overNode.toAbsolute();\r\n          if (!this.overNode.isElement() || this.overNode.style.pointerEvents !== 'none') {\r\n            this.overNode.dispatchEvent(\r\n              new RDragEvent(\r\n                RDragEvent.NAME_DRAGLEAVE,\r\n                this.gui.mouseX,\r\n                this.gui.mouseY,\r\n                this.gui.mouseX - p.x,\r\n                this.gui.mouseY - p.y,\r\n                0,\r\n                this.gui.mouseButtonState,\r\n                this.gui.ctrlKey,\r\n                this.gui.shiftKey,\r\n                this.gui.altKey,\r\n                this.gui.metaKey,\r\n                this.dataTransfer,\r\n              ),\r\n            );\r\n          }\r\n        }\r\n        hover.element.dispatchEvent(\r\n          new RDragEvent(\r\n            RDragEvent.NAME_DRAGENTER,\r\n            this.gui.mouseX,\r\n            this.gui.mouseY,\r\n            hover.x,\r\n            hover.y,\r\n            0,\r\n            this.gui.mouseButtonState,\r\n            this.gui.ctrlKey,\r\n            this.gui.shiftKey,\r\n            this.gui.altKey,\r\n            this.gui.metaKey,\r\n            this.dataTransfer,\r\n          ),\r\n        );\r\n        this.overNode = hover.element;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  start(x: number, y: number, dataTransfer: DataTransfer): boolean {\r\n    if (!this.started) {\r\n      if (this.node && (!this.node.isElement() || this.node.style.pointerEvents !== 'none')) {\r\n        const absPos = this.node.toAbsolute();\r\n        const dragStartEvent = new RDragEvent(\r\n          RDragEvent.NAME_DRAGSTART,\r\n          x,\r\n          y,\r\n          x - absPos.x,\r\n          y - absPos.y,\r\n          0,\r\n          this.gui.mouseButtonState,\r\n          this.gui.ctrlKey,\r\n          this.gui.shiftKey,\r\n          this.gui.altKey,\r\n          this.gui.metaKey,\r\n          dataTransfer,\r\n        );\r\n        this.node.dispatchEvent(dragStartEvent);\r\n        if (dragStartEvent.defaultPrevented) {\r\n          return false;\r\n        }\r\n      }\r\n      this.startX = x;\r\n      this.startY = y;\r\n      this.dataTransfer = dataTransfer;\r\n      this.started = true;\r\n      this.dragImage = [];\r\n      this.cachedDragOverEvent = new RDragEvent(\r\n        RDragEvent.NAME_DRAGOVER,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        false,\r\n        false,\r\n        false,\r\n        false,\r\n        null,\r\n      );\r\n      this.timer = window.setInterval(() => {\r\n        const hover = this.gui.getHover();\r\n        if (hover) {\r\n          this.cachedDragOverEvent.init(\r\n            x,\r\n            y,\r\n            hover.x,\r\n            hover.y,\r\n            0,\r\n            this.gui.mouseButtonState,\r\n            0,\r\n            0,\r\n            this.gui.ctrlKey,\r\n            this.gui.shiftKey,\r\n            this.gui.altKey,\r\n            this.gui.metaKey,\r\n          );\r\n          this.cachedDragOverEvent.dataTransfer = this.dataTransfer;\r\n          hover.element.dispatchEvent(this.cachedDragOverEvent);\r\n        }\r\n      }, DRAGOVER_INTERVAL);\r\n    }\r\n    return true;\r\n  }\r\n  end(drop: boolean) {\r\n    if (this.started) {\r\n      if (drop) {\r\n        const hover = this.gui.getHover();\r\n        if (hover) {\r\n          hover.element.dispatchEvent(\r\n            new RDragEvent(\r\n              RDragEvent.NAME_DRAGDROP,\r\n              this.gui.mouseX,\r\n              this.gui.mouseY,\r\n              hover.x,\r\n              hover.y,\r\n              0,\r\n              this.gui.mouseButtonState,\r\n              this.gui.ctrlKey,\r\n              this.gui.shiftKey,\r\n              this.gui.altKey,\r\n              this.gui.metaKey,\r\n              this.dataTransfer,\r\n            ),\r\n          );\r\n        }\r\n      }\r\n      if (this.node && (!this.node.isElement() || this.node.style.pointerEvents !== 'none')) {\r\n        const absPos = this.node.toAbsolute();\r\n        this.node.dispatchEvent(\r\n          new RDragEvent(\r\n            RDragEvent.NAME_DRAGEND,\r\n            this.gui.mouseX,\r\n            this.gui.mouseY,\r\n            this.gui.mouseX - absPos.x,\r\n            this.gui.mouseY - absPos.y,\r\n            0,\r\n            this.gui.mouseButtonState,\r\n            this.gui.ctrlKey,\r\n            this.gui.shiftKey,\r\n            this.gui.altKey,\r\n            this.gui.metaKey,\r\n            this.dataTransfer,\r\n          ),\r\n        );\r\n      }\r\n\r\n      this.started = false;\r\n      this.dataTransfer = null;\r\n      this.dragImage = null;\r\n      this.cachedDragOverEvent = null;\r\n      window.clearInterval(this.timer);\r\n      this.timer = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport class GUI extends REventTarget {\r\n  /** @internal */\r\n  protected _renderer: GUIRenderer;\r\n  /** @internal */\r\n  protected _imageManager: ImageManager;\r\n  /** @internal */\r\n  protected _glyphManager: GlyphManager;\r\n  /** @internal */\r\n  protected _document: RDocument;\r\n  /** @internal */\r\n  protected _focusElement: RNode;\r\n  /** @internal */\r\n  protected _activeElement: RNode;\r\n  /** @internal */\r\n  protected _captureElement: RNode;\r\n  /** @internal */\r\n  protected _layoutDirty: boolean;\r\n  /** @internal */\r\n  protected _updatingLayout: boolean;\r\n  /** @internal */\r\n  protected _topLayout: UILayout;\r\n  /** @internal */\r\n  protected _hoverElements: { element: RNode; x: number; y: number }[];\r\n  /** @internal */\r\n  protected _bounds: UIRect;\r\n  /** @internal */\r\n  protected _rendererWidth: number;\r\n  /** @internal */\r\n  protected _rendererHeight: number;\r\n  /** @internal */\r\n  protected _styleRefreshList: RNode[];\r\n  /** @internal */\r\n  protected _styleFullRefresh: boolean;\r\n  /** @internal */\r\n  protected _ruleListImported: {\r\n    rule: Rule;\r\n    stylesheet: IStyleSheet;\r\n    extra: unknown;\r\n  }[];\r\n  /** @internal */\r\n  protected _guiLoading: boolean;\r\n  /** @internal */\r\n  protected _styleUpdating: boolean;\r\n  /** @internal */\r\n  protected _domTag: number;\r\n  /** @internal */\r\n  protected _baseURI: string;\r\n  /** @internal */\r\n  protected _drawVisitor: DrawVisitor;\r\n  /** @internal */\r\n  protected _dragSession: DragSession;\r\n  /** @internal */\r\n  protected _mouseX: number;\r\n  /** @internal */\r\n  protected _mouseY: number;\r\n  /** @internal */\r\n  protected _buttonState: number;\r\n  /** @internal */\r\n  protected _ctrlKey: boolean;\r\n  /** @internal */\r\n  protected _shiftKey: boolean;\r\n  /** @internal */\r\n  protected _altKey: boolean;\r\n  /** @internal */\r\n  protected _metaKey: boolean;\r\n  /** @internal */\r\n  protected _styleElements: RElement[];\r\n  /** @internal */\r\n  protected _assetManager: AssetManager;\r\n\r\n  constructor(renderer: GUIRenderer, bounds?: UIRect) {\r\n    super(new GUIEventPathBuilder());\r\n    this._renderer = renderer;\r\n    this._drawVisitor = new DrawVisitor(this);\r\n    this._imageManager = new ImageManager(this._renderer);\r\n    this._glyphManager = new GlyphManager(this._renderer);\r\n    this._assetManager = this._renderer.device.createAssetManager();\r\n    this._document = null;\r\n    this._focusElement = null;\r\n    this._activeElement = null;\r\n    this._captureElement = null;\r\n    this._hoverElements = [];\r\n    this._layoutDirty = false;\r\n    this._updatingLayout = false;\r\n    this._bounds = bounds ? { ...bounds } : null;\r\n    this._styleRefreshList = [];\r\n    this._styleFullRefresh = false;\r\n    this._ruleListImported = [];\r\n    this._guiLoading = false;\r\n    this._styleUpdating = false;\r\n    this._domTag = 0;\r\n    this._baseURI = '';\r\n    this._dragSession = null;\r\n    this._mouseX = 0;\r\n    this._mouseY = 0;\r\n    this._buttonState = 0;\r\n    this._ctrlKey = false;\r\n    this._shiftKey = false;\r\n    this._altKey = false;\r\n    this._metaKey = false;\r\n    this._styleElements = [];\r\n    this._topLayout = new UILayout(null);\r\n    this._rendererWidth = this._renderer.getDrawingBufferWidth();\r\n    this._rendererHeight = this._renderer.getDrawingBufferHeight();\r\n    this._topLayout.node.setDisplay(Yoga.DISPLAY_FLEX);\r\n    this._topLayout.node.setPadding(Yoga.EDGE_LEFT, 0);\r\n    this._topLayout.node.setPadding(Yoga.EDGE_TOP, 0);\r\n    this._topLayout.node.setPadding(Yoga.EDGE_RIGHT, 0);\r\n    this._topLayout.node.setPadding(Yoga.EDGE_BOTTOM, 0);\r\n    this._topLayout.node.setPositionType(Yoga.POSITION_TYPE_ABSOLUTE);\r\n    this._topLayout.node.setPosition(Yoga.EDGE_LEFT, this._bounds ? this._bounds.x : 0);\r\n    this._topLayout.node.setPosition(Yoga.EDGE_TOP, this._bounds ? this._bounds.y : 0);\r\n    this._topLayout.node.setWidth(this._bounds ? this._bounds.width : this._rendererWidth);\r\n    this._topLayout.node.setHeight(this._bounds ? this._bounds.height : this._rendererHeight);\r\n    (this._renderer as any).device?.addEventListener('device_restored', () => {\r\n      this._invalidateTextContents();\r\n    });\r\n    /*\r\n    this.addDefaultEventListener('resize', function (this: GUI) {\r\n      if (!this._bounds) {\r\n        this._topLayout.node.setWidth(this._renderer.getDrawingBufferWidth());\r\n        this._topLayout.node.setHeight(this._renderer.getDrawingBufferHeight());\r\n        this.invalidateLayout();\r\n        setTimeout(() => {\r\n          const inputs = this.document.querySelectorAll('input');\r\n          for (const input of inputs.values()) {\r\n            (input as unknown as Input)._updateHiddenInput();\r\n          }\r\n        }, 0);\r\n      }\r\n    });\r\n    */\r\n    this.addDefaultEventListener(RMouseEvent.NAME_RENDERER_DRAGENTER, function (this: GUI, e: REvent) {\r\n      const dragEvent: RDragEvent = e as RDragEvent;\r\n      this._syncMouseStates(dragEvent);\r\n      this._updateMouseLocation(dragEvent.x, dragEvent.y, dragEvent.button);\r\n      if (!this._dragSession) {\r\n        this._dragSession = new DragSession(this, null, dragEvent.x, dragEvent.y);\r\n        this._dragSession.start(dragEvent.x, dragEvent.y, dragEvent.dataTransfer);\r\n        this._dragSession.update();\r\n      }\r\n    });\r\n    this.addDefaultEventListener(RMouseEvent.NAME_RENDERER_DRAGOVER, function (this: GUI, e: REvent) {\r\n      const dragEvent: RDragEvent = e as RDragEvent;\r\n      this._syncMouseStates(dragEvent);\r\n      this._updateMouseLocation(dragEvent.x, dragEvent.y, dragEvent.button);\r\n      if (this._dragSession) {\r\n        this._dragSession.dataTransfer = dragEvent.dataTransfer;\r\n        this._dragSession.update();\r\n      }\r\n    });\r\n    this.addDefaultEventListener(RMouseEvent.NAME_RENDERER_DRAGDROP, function (this: GUI, e: REvent) {\r\n      const dragEvent: RDragEvent = e as RDragEvent;\r\n      this._syncMouseStates(dragEvent);\r\n      this._updateMouseLocation(dragEvent.x, dragEvent.y, dragEvent.button);\r\n      if (this._dragSession) {\r\n        this._dragSession.dataTransfer = dragEvent.dataTransfer;\r\n        this._dragSession.end(true);\r\n        this._dragSession = null;\r\n      }\r\n    });\r\n    for (const evt in deviceMouseEvents) {\r\n      this.addDefaultEventListener(evt, function (this: GUI, e: REvent) {\r\n        const mouseEvent: RMouseEvent = e as RMouseEvent;\r\n        this._syncMouseStates(mouseEvent);\r\n        let click = false;\r\n        let dragend = false;\r\n        let drop = false;\r\n        if (evt === RMouseEvent.NAME_RENDERER_MOUSEMOVE) {\r\n          this._updateMouseLocation(mouseEvent.x, mouseEvent.y, mouseEvent.button);\r\n        }\r\n        let info: { element: RNode; x: number; y: number } = null;\r\n        for (const el of this._hoverElements) {\r\n          if (\r\n            !el.element.isElement() ||\r\n            el.element.style.pointerEvents !== 'none'\r\n          ) {\r\n            info = el;\r\n            break;\r\n          }\r\n        }\r\n        if (evt === RMouseEvent.NAME_RENDERER_MOUSEDOWN) {\r\n          if (info && mouseEvent.button === 0) {\r\n            if (this._dragSession) {\r\n              this._dragSession.end(false);\r\n              this._dragSession = null;\r\n            }\r\n            this._activeElement = info.element;\r\n            this._activeElement._onMouseDown(info.x, info.y);\r\n            this.setFocus(info.element);\r\n            if (\r\n              this._activeElement.isElement() &&\r\n              this._activeElement.getAttribute('draggable') === 'true'\r\n            ) {\r\n              this._dragSession = new DragSession(\r\n                this,\r\n                this._activeElement,\r\n                mouseEvent.x,\r\n                mouseEvent.y,\r\n              );\r\n            }\r\n          }\r\n        } else if (evt === RMouseEvent.NAME_RENDERER_MOUSEUP) {\r\n          if (info && mouseEvent.button === 0) {\r\n            if (!this._dragSession || !this._dragSession.started) {\r\n              info.element._onMouseUp(info.x, info.y);\r\n              if (info.element === this._activeElement) {\r\n                click = true;\r\n              }\r\n            }\r\n            dragend = true;\r\n            drop = true;\r\n            this._activeElement = null;\r\n          }\r\n        }\r\n        if (dragend && this._dragSession) {\r\n          this._dragSession.end(drop);\r\n          this._dragSession = null;\r\n          this._updateMouseLocation(mouseEvent.x, mouseEvent.y, mouseEvent.button);\r\n        }\r\n        if (!this._dragSession || !this._dragSession.started) {\r\n          const me = new RMouseEvent(\r\n            deviceMouseEvents[evt],\r\n            mouseEvent.x,\r\n            mouseEvent.y,\r\n            info ? info.x : mouseEvent.x,\r\n            info ? info.y : mouseEvent.y,\r\n            mouseEvent.button,\r\n            mouseEvent.buttons,\r\n            mouseEvent.wheelDeltaX,\r\n            mouseEvent.wheelDeltaY,\r\n            mouseEvent.ctrlKey,\r\n            mouseEvent.shiftKey,\r\n            mouseEvent.altKey,\r\n            mouseEvent.metaKey,\r\n          );\r\n          (info ? info.element : this.document).dispatchEvent(me);\r\n          if (click) {\r\n            const ce = new RMouseEvent(\r\n              RMouseEvent.NAME_MOUSECLICK,\r\n              mouseEvent.x,\r\n              mouseEvent.y,\r\n              info ? info.x : mouseEvent.x,\r\n              info ? info.y : mouseEvent.y,\r\n              mouseEvent.button,\r\n              mouseEvent.buttons,\r\n              mouseEvent.wheelDeltaX,\r\n              mouseEvent.wheelDeltaY,\r\n              mouseEvent.ctrlKey,\r\n              mouseEvent.shiftKey,\r\n              mouseEvent.altKey,\r\n              mouseEvent.metaKey,\r\n            );\r\n            (info ? info.element : this.document).dispatchEvent(ce);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    for (const evt in deviceKeyEvents) {\r\n      this.addDefaultEventListener(evt, function (this: GUI, e: REvent) {\r\n        const keyEvent = e as RKeyEvent;\r\n        this._ctrlKey = keyEvent.ctrlKey;\r\n        this._shiftKey = keyEvent.shiftKey;\r\n        this._altKey = keyEvent.altKey;\r\n        this._metaKey = keyEvent.metaKey;\r\n        if (this._focusElement) {\r\n          this._focusElement.dispatchEvent(\r\n            new RKeyEvent(\r\n              deviceKeyEvents[evt],\r\n              keyEvent.code,\r\n              keyEvent.key,\r\n              keyEvent.repeat,\r\n              keyEvent.ctrlKey,\r\n              keyEvent.shiftKey,\r\n              keyEvent.altKey,\r\n              keyEvent.metaKey,\r\n            ),\r\n          );\r\n        }\r\n      });\r\n    }\r\n    const domChangeFunc = function (this: GUI, e: REvent) {\r\n      const data: RDOMTreeEvent = e as RDOMTreeEvent;\r\n      this._domTag++;\r\n      if (data.node.isElement()) {\r\n        const el: RElement = data.node;\r\n        const numChildren = el.children.length;\r\n        let styleChanged = false;\r\n        if (e.type === RDOMTreeEvent.NAME_INSERTED) {\r\n          if (el.isConnected) {\r\n            if (el.tagName === 'style') {\r\n              this._styleElements.push(el);\r\n              styleChanged = true;\r\n            }\r\n            if (el._isText()) {\r\n              el._invalidateContent();\r\n            }\r\n            if (numChildren > 0) {\r\n              const styles = el.querySelectorAll('style');\r\n              styles.forEach((styleEl) => {\r\n                this._styleElements.push(styleEl as RElement);\r\n                styleChanged = true;\r\n              });\r\n            }\r\n          }\r\n        } else if (e.type === RDOMTreeEvent.NAME_REMOVED) {\r\n          if (data.parent.isConnected) {\r\n            if (el.tagName === 'style') {\r\n              const index = this._styleElements.indexOf(el);\r\n              console.assert(index >= 0, 'Style element not found');\r\n              this._styleElements.splice(index, 1);\r\n              styleChanged = true;\r\n            }\r\n            if (numChildren > 0) {\r\n              const styles = el.querySelectorAll('style');\r\n              styles.forEach((styleEl) => {\r\n                const index = this._styleElements.indexOf(styleEl as RElement);\r\n                console.assert(index >= 0, 'Style element not found');\r\n                this._styleElements.splice(index, 1);\r\n                styleChanged = true;\r\n              });\r\n            }\r\n          }\r\n        }\r\n        if (styleChanged) {\r\n          this.requireFullStyleRefresh();\r\n        } else {\r\n          this._markStyleRefreshForElement(data.parent || el);\r\n        }\r\n        if (\r\n          !this._guiLoading &&\r\n          (el.tagName === 'link' || (numChildren > 0 && el.querySelector('link')))\r\n        ) {\r\n          const linkElements = [...(el.tagName === 'link' ? [el] : []), ...el.querySelectorAll('link').values()];\r\n          linkElements.forEach(linkEl => {\r\n            this._importLinkContent(linkEl as RElement);\r\n          });\r\n        }\r\n      }\r\n    };\r\n    this.addDefaultEventListener(RDOMTreeEvent.NAME_INSERTED, domChangeFunc);\r\n    this.addDefaultEventListener(RDOMTreeEvent.NAME_REMOVED, domChangeFunc);\r\n    injectGUIEvents(this, this._renderer);\r\n    this._document = new RDocument(this);\r\n    this._topLayout.appendChild(this._document._getLayout());\r\n    const root = this._document.createElement('html');\r\n    root.append(this._document.createElement('head'));\r\n    root.append(this._document.createElement('body'));\r\n    this._document.append(root);\r\n    this._hoverElements.push({ element: this._document, x: 0, y: 0 });\r\n    this.invalidateLayout();\r\n    this.requireFullStyleRefresh();\r\n  }\r\n  get renderer() {\r\n    return this._renderer;\r\n  }\r\n  get bounds(): UIRect {\r\n    return this._bounds;\r\n  }\r\n  set bounds(rect: UIRect) {\r\n    this._bounds = rect ? { ...rect } : null;\r\n    this._topLayout.node.setPosition(Yoga.EDGE_LEFT, this._bounds ? this._bounds.x : 0);\r\n    this._topLayout.node.setPosition(Yoga.EDGE_TOP, this._bounds ? this._bounds.y : 0);\r\n    this._topLayout.node.setWidth(\r\n      this._bounds ? this._bounds.width : this._renderer.getDrawingBufferWidth(),\r\n    );\r\n    this._topLayout.node.setHeight(\r\n      this._bounds ? this._bounds.height : this._renderer.getDrawingBufferHeight(),\r\n    );\r\n    this.invalidateLayout();\r\n  }\r\n  get baseURI(): string {\r\n    return this._baseURI;\r\n  }\r\n  set baseURI(val: string) {\r\n    this._baseURI = val || '';\r\n  }\r\n  get document(): RDocument {\r\n    return this._document;\r\n  }\r\n  get imageManager(): ImageManager {\r\n    return this._imageManager;\r\n  }\r\n  get mouseX(): number {\r\n    return this._mouseX;\r\n  }\r\n  get mouseY(): number {\r\n    return this._mouseY;\r\n  }\r\n  get mouseButtonState(): number {\r\n    return this._buttonState;\r\n  }\r\n  get ctrlKey(): boolean {\r\n    return this._ctrlKey;\r\n  }\r\n  get shiftKey(): boolean {\r\n    return this._shiftKey;\r\n  }\r\n  get altKey(): boolean {\r\n    return this._altKey;\r\n  }\r\n  get metaKey(): boolean {\r\n    return this._metaKey;\r\n  }\r\n  /** @internal */\r\n  getDragSession(): DragSession {\r\n    return this._dragSession || null;\r\n  }\r\n  getHover(): { element: RNode; x: number; y: number } {\r\n    for (const info of this._hoverElements) {\r\n      if (!info.element.isElement() || info.element.style.pointerEvents !== 'none') {\r\n        return info;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  getFocus(): RNode {\r\n    return this._focusElement;\r\n  }\r\n  setFocus(node: RNode) {\r\n    node = node || null;\r\n    if (node !== this._focusElement) {\r\n      if (this._focusElement) {\r\n        const focusElement = this._focusElement;\r\n        setTimeout(() => {\r\n          focusElement.dispatchEvent(new RFocusEvent(RFocusEvent.NAME_BLUR));\r\n        }, 0);\r\n      }\r\n      if (node) {\r\n        setTimeout(() => {\r\n          node.dispatchEvent(new RFocusEvent(RFocusEvent.NAME_FOCUS));\r\n        }, 0);\r\n      }\r\n      this._focusElement = node;\r\n      this.dispatchEvent(new RDOMTreeEvent(RDOMTreeEvent.NAME_FOCUSED, null, node));\r\n    }\r\n  }\r\n  getCapture() {\r\n    return this._captureElement;\r\n  }\r\n  setCapture(node: RNode) {\r\n    this._captureElement = node || null;\r\n  }\r\n  dispose() {\r\n    this._imageManager?.dispose();\r\n    this._imageManager = null;\r\n  }\r\n  /** @internal */\r\n  invalidateLayout() {\r\n    this._layoutDirty = true;\r\n  }\r\n  /** @internal */\r\n  requireFullStyleRefresh() {\r\n    if (!this._styleUpdating) {\r\n      this._styleFullRefresh = true;\r\n    }\r\n  }\r\n  /** @internal */\r\n  get domTag(): number {\r\n    return this._domTag;\r\n  }\r\n  /** @internal */\r\n  checkSize() {\r\n    if (!this._bounds) {\r\n      const width = this._renderer.getDrawingBufferWidth();\r\n      const height = this._renderer.getDrawingBufferHeight();\r\n      if (this._rendererWidth !== width || this._rendererHeight !== height) {\r\n        this._rendererWidth = width;\r\n        this._rendererHeight = height;\r\n        this._topLayout.node.setWidth(this._rendererWidth);\r\n        this._topLayout.node.setHeight(this._rendererHeight);\r\n        this.invalidateLayout();\r\n        setTimeout(() => {\r\n          const inputs = this.document.querySelectorAll('input');\r\n          for (const input of inputs.values()) {\r\n            (input as unknown as Input)._updateHiddenInput();\r\n          }\r\n        }, 0);\r\n      }\r\n    }\r\n  }\r\n  /** @internal */\r\n  checkAndRefreshStyle() {\r\n    if (this._document) {\r\n      if (this._styleFullRefresh) {\r\n        this._styleRefreshList.splice(0, this._styleRefreshList.length, this._document);\r\n      } else {\r\n        // skip removed elements and style elements\r\n        const validElements: RNode[] = [];\r\n        for (const e of this._styleRefreshList) {\r\n          if (\r\n            e.nodeType === RNode.ELEMENT_NODE &&\r\n            (e as RElement).tagName !== 'style' &&\r\n            e._isSucceedingOf(this._document)\r\n          ) {\r\n            validElements.push(e);\r\n          }\r\n        }\r\n        this._styleRefreshList = validElements;\r\n      }\r\n      if (this._styleRefreshList.length > 0) {\r\n        this._styleUpdating = true;\r\n        const styleElements = this._styleElements;\r\n        const processedElements: Set<RNode> = new Set();\r\n        const ruleList: {\r\n          rule: Rule;\r\n          stylesheet: IStyleSheet;\r\n          extra: unknown;\r\n        }[] = [...this._ruleListImported];\r\n        for (const el of styleElements) {\r\n          for (const def of (el as StyleElement).definitions) {\r\n            for (const rule of def.selector.rules()) {\r\n              ruleList.push({\r\n                rule: rule,\r\n                stylesheet: def.stylesheet,\r\n                extra: def.extra,\r\n              });\r\n            }\r\n          }\r\n        }\r\n        let allElements: RElement[] = null;\r\n        const pseudoMap: Map<\r\n          RNode,\r\n          Map<string, { stylesheet: IStyleSheet; extra: unknown }[]>\r\n        > = new Map();\r\n        if (this._styleFullRefresh) {\r\n          allElements = this._querySelectorAll(this._document, '*', true, true);\r\n        }\r\n        if (ruleList.length > 0) {\r\n          if (this._styleRefreshList.indexOf(this._document) >= 0) {\r\n            this._styleRefreshList.splice(0, this._styleRefreshList.length, this._document);\r\n          }\r\n          ruleList.sort((a, b) => {\r\n            return a.rule.specificity - b.rule.specificity;\r\n          });\r\n          for (const rule of ruleList) {\r\n            rule.rule.resolve(this._styleRefreshList, true, true, (node: RNode, type: string) => {\r\n              const pseudoTypes: Map<string, { stylesheet: IStyleSheet; extra: unknown }[]> =\r\n                pseudoMap.get(node) || new Map();\r\n              pseudoMap.set(node, pseudoTypes);\r\n              const styleList: { stylesheet: IStyleSheet; extra: unknown }[] =\r\n                pseudoTypes.get(type) || [];\r\n              pseudoTypes.set(type, styleList);\r\n              styleList.push({\r\n                stylesheet: rule.stylesheet,\r\n                extra: rule.extra,\r\n              });\r\n            });\r\n            for (const e of rule.rule.targets) {\r\n              if (e.nodeType !== RNode.DOCUMENT_NODE) {\r\n                if (!processedElements.has(e)) {\r\n                  e._resetStyle();\r\n                  processedElements.add(e);\r\n                }\r\n                e.style.applyStyleSheet(rule.stylesheet, false);\r\n              }\r\n              e._updatePseudoElementStyles(pseudoMap.get(e));\r\n            }\r\n            if (!this._styleFullRefresh) {\r\n              for (const e of pseudoMap) {\r\n                e[0]._updatePseudoElementStyles(e[1]);\r\n              }\r\n              pseudoMap.clear();\r\n            }\r\n          }\r\n          processedElements.forEach((e) => {\r\n            e._applyInlineStyles();\r\n          });\r\n        }\r\n        if (this._styleFullRefresh) {\r\n          for (const e of allElements) {\r\n            if (!processedElements.has(e)) {\r\n              e._resetStyle();\r\n              e._applyInlineStyles();\r\n            }\r\n            e._updatePseudoElementStyles(pseudoMap.get(e));\r\n          }\r\n        } else {\r\n          for (const e of this._styleRefreshList) {\r\n            if (!processedElements.has(e)) {\r\n              e._resetStyle();\r\n              e._applyInlineStyles();\r\n            }\r\n          }\r\n        }\r\n        this._styleUpdating = false;\r\n      }\r\n    }\r\n    this._styleRefreshList.splice(0, this._styleRefreshList.length);\r\n    this._styleFullRefresh = false;\r\n  }\r\n  /** @internal */\r\n  updateLayout() {\r\n    if (this._layoutDirty) {\r\n      if (this._updatingLayout) {\r\n        console.warn('updateLayout called recursively');\r\n      } else {\r\n        this._layoutDirty = false;\r\n        this._updatingLayout = true;\r\n        this._topLayout.calcLayout();\r\n        if (this._document) {\r\n          this._document._syncLayout();\r\n        }\r\n        this._updatingLayout = false;\r\n      }\r\n    }\r\n  }\r\n  /** @internal */\r\n  hitTest(x: number, y: number): { element: RNode; x: number; y: number }[] {\r\n    this.updateLayout();\r\n    const v = new GUIHitTestVisitor(x, y);\r\n    this._document.traverse(v, true, true);\r\n    let hits = v.getHits();\r\n    if (hits.length > 0) {\r\n      const topmost = hits[0].element;\r\n      hits = hits.filter((val) => val.element.contains(topmost));\r\n    }\r\n    return hits;\r\n  }\r\n  render() {\r\n    this.checkSize();\r\n    this.checkAndRefreshStyle();\r\n    this.updateLayout();\r\n    this._renderer.beginRender();\r\n    this._drawVisitor.beginTraverse();\r\n    this.document.traverse(this._drawVisitor, false, true);\r\n    this._drawVisitor.endTraverse();\r\n    this._renderer.endRender();\r\n  }\r\n  serializeToXML(): string {\r\n    return this._serializeToXML();\r\n  }\r\n  async deserializeFromXML(xml: string) {\r\n    this._guiLoading = true;\r\n    while (this._document.firstChild) {\r\n      this._document.removeChild(this._document.firstChild);\r\n    }\r\n    const parser = new DOMParser();\r\n    const dom = parser.parseFromString(xml, 'text/html');\r\n    if (dom.getElementsByTagName('parsererror').length > 0) {\r\n      return null;\r\n    }\r\n    const docElement = dom.documentElement;\r\n    this._document.append(this._deserializeElement(docElement));\r\n    const linkElements = this._document.querySelectorAll('link');\r\n    for (const link of linkElements.values()) {\r\n      await this._importLinkContent(link as RElement);\r\n    }\r\n    this._guiLoading = false;\r\n  }\r\n  async deserializeFromURL(url: string) {\r\n    this._guiLoading = true;\r\n    const content = await this._assetManager.fetchTextData(url);\r\n    if (content) {\r\n      const normalizedURL = this._assetManager.resolveURL(url);\r\n      const index = normalizedURL.lastIndexOf('/');\r\n      this._baseURI = normalizedURL.substring(0, index + 1);\r\n      await this.deserializeFromXML(content);\r\n    }\r\n    this._guiLoading = false;\r\n  }\r\n  createElement<T extends RElement = RElement>(tagName: string): T {\r\n    const el = elementRegistry.createElement(this, tagName) as T;\r\n    el._init();\r\n    return el;\r\n  }\r\n  createTextNode(): RText {\r\n    return new RText(this);\r\n  }\r\n  loadCSS(content: string) {\r\n    if (content) {\r\n      const entries = this._parseStyleContent(content);\r\n      for (const def of entries) {\r\n        for (const rule of def.selector.rules()) {\r\n          this._ruleListImported.push({\r\n            rule: rule,\r\n            stylesheet: def.stylesheet,\r\n            extra: def.extra,\r\n          });\r\n        }\r\n      }\r\n    }\r\n    this.requireFullStyleRefresh();\r\n  }\r\n  /** @internal */\r\n  async loadCSSFromURL(url: string) {\r\n    const content = await this._assetManager.fetchTextData(this._baseURI + url);\r\n    this.loadCSS(content);\r\n  }\r\n  /** @internal */\r\n  _invalidateTextContents(root?: RNode) {\r\n    root = root || this.document;\r\n    if (root._isText()) {\r\n      root._invalidateContent();\r\n      for (let child = root.firstChild; child; child = child.nextSibling) {\r\n        this._invalidateTextContents(child);\r\n      }\r\n    }\r\n  }\r\n  /** @internal */\r\n  _drawBatchList(batches: RPrimitiveBatchList) {\r\n    for (let i = 0; i < batches.length; i++) {\r\n      const batch = batches.getBatch(i);\r\n      const vertices = batches.getVertices(i);\r\n      const color = batch.color;\r\n      if (color.a > 0 && vertices) {\r\n        this._renderer.drawQuads(vertices, batch.texture || null);\r\n      }\r\n    }\r\n  }\r\n  /** @internal */\r\n  _getGlyphTexture(index: number): Texture2D {\r\n    return this._glyphManager.getGlyphTexture(index);\r\n  }\r\n  /** @internal */\r\n  _getGlyphInfo(char: string, font: Font, color: RColor): IGlyphInfo {\r\n    return this._glyphManager.getGlyphInfo(char, font, color);\r\n  }\r\n  /** @internal */\r\n  _getCharWidth(char: string, font: Font): number {\r\n    return this._glyphManager.getCharWidth(char, font);\r\n  }\r\n  /** @internal */\r\n  _measureStringWidth(str: string, charMargin: number, font: Font) {\r\n    return this._glyphManager.measureStringWidth(str, charMargin, font);\r\n  }\r\n  /** @internal */\r\n  _clipStringToWidth(str: string, width: number, charMargin: number, start: number, font: Font) {\r\n    return this._glyphManager.clipStringToWidth(str, width, charMargin, start, font);\r\n  }\r\n  /** @internal */\r\n  _querySelectorAll<T extends RElement>(root: RNode, selectors: string, excludeRoot: boolean, allowInternal: boolean): T[] {\r\n    return new RSelector(selectors).resolve(root, excludeRoot, allowInternal) as T[];\r\n  }\r\n  /** @internal */\r\n  _querySelectorOne<T extends RElement>(root: RNode, selectors: string, excludeRoot: boolean, allowInternal): T {\r\n    return this._querySelectorAll<T>(root, selectors, excludeRoot, allowInternal)[0] || null;\r\n  }\r\n  /** @internal */\r\n  _getTopLayout(): UILayout {\r\n    return this._topLayout;\r\n  }\r\n  /** @internal */\r\n  _getElementById(root: RNode, id: string): RElement {\r\n    if (root.nodeType === RNode.ELEMENT_NODE && (root as RElement).id === id) {\r\n      return root as RElement;\r\n    }\r\n    for (const child of root.childNodes.values()) {\r\n      const e = this._getElementById(child, id);\r\n      if (e) {\r\n        return e;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  /** @internal */\r\n  _getElementsByTagName(root: RNode, tagName: string, results: RElement[]) {\r\n    if (root.nodeType === RNode.ELEMENT_NODE && (root as RElement).tagName === tagName) {\r\n      results.push(root as RElement);\r\n    }\r\n    for (const child of root.childNodes.values()) {\r\n      this._getElementsByTagName(child, tagName, results);\r\n    }\r\n    return null;\r\n  }\r\n  /** @internal */\r\n  _getElementsByClassName(root: RNode, classnames: string[], results: RElement[]) {\r\n    if (root.nodeType === RNode.ELEMENT_NODE) {\r\n      let matched = true;\r\n      const el = root as RElement;\r\n      for (const classname of classnames) {\r\n        if (!el.classList.contains(classname)) {\r\n          matched = false;\r\n          break;\r\n        }\r\n      }\r\n      if (matched) {\r\n        results.push(el);\r\n      }\r\n    }\r\n    for (const child of root.childNodes.values()) {\r\n      this._getElementsByClassName(child, classnames, results);\r\n    }\r\n    return null;\r\n  }\r\n  /** @internal */\r\n  _markStyleRefreshForElement(element: RNode) {\r\n    if (!this._styleUpdating && element && this._styleRefreshList.indexOf(element) < 0) {\r\n      this._styleRefreshList.push(element);\r\n    }\r\n  }\r\n  /** @internal */\r\n  _parseStyleContent(\r\n    content: string,\r\n  ): { selector: RSelector; stylesheet: IStyleSheet; extra: unknown }[] {\r\n    const result: {\r\n      selector: RSelector;\r\n      stylesheet: IStyleSheet;\r\n      extra: unknown;\r\n    }[] = [];\r\n    content = content\r\n      .split(/[\\r\\n]+/)\r\n      .join('')\r\n      .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\r\n    for (; ;) {\r\n      const lbracket = content.indexOf('{');\r\n      const rbracket = content.indexOf('}');\r\n      if (lbracket < 0 || rbracket < 0 || lbracket > rbracket) {\r\n        break;\r\n      }\r\n      const sel = content.substring(0, lbracket).trim();\r\n      const styles = content.substring(lbracket + 1, rbracket);\r\n      content = content.substr(rbracket + 1);\r\n\r\n      const selector = new RSelector(sel);\r\n      if (selector.rules().length === 0) {\r\n        continue;\r\n      }\r\n      const extra = {};\r\n      const stylesheet = parseStyleSheet(styles, extra);\r\n      if (!stylesheet) {\r\n        continue;\r\n      }\r\n      result.push({ selector, stylesheet, extra });\r\n    }\r\n    return result;\r\n  }\r\n  /** @internal */\r\n  private _deserializeElement(el: Element): RElement {\r\n    const element = this.createElement(el.tagName.toLowerCase());\r\n    for (const attr of el.attributes) {\r\n      element.setAttribute(attr.name, attr.value);\r\n    }\r\n    for (const className of el.classList) {\r\n      element.classList.add(className);\r\n    }\r\n    for (const child of el.childNodes) {\r\n      if (child.nodeType === Node.TEXT_NODE) {\r\n        const text = child.textContent.trim().replace(/\\s+/, ' ');\r\n        if (text !== '') {\r\n          element.append(text);\r\n        }\r\n      } else if (child.nodeType === Node.ELEMENT_NODE) {\r\n        element.append(this._deserializeElement(child as Element));\r\n      }\r\n    }\r\n    return element;\r\n  }\r\n  /** @internal */\r\n  private async _importLinkContent(link: RElement) {\r\n    const rel = link.getAttribute('rel');\r\n    switch (rel) {\r\n      case 'stylesheet': {\r\n        await this.loadCSSFromURL(link.getAttribute('href'));\r\n        break;\r\n      }\r\n      default: {\r\n        throw new Error(`Invalid rel attribute for link: ${rel}`)\r\n      }\r\n    }\r\n  }\r\n  /** @internal */\r\n  private _serializeToXML(): string {\r\n    const doc = document.implementation.createDocument(null, 'node', null);\r\n    doc.firstChild.remove();\r\n    if (this.document.documentElement) {\r\n      doc.append(this._createDOMElement(this.document.documentElement, doc, null));\r\n      this._buildDOM(this.document.documentElement, doc, doc.documentElement);\r\n    }\r\n    return new XMLSerializer().serializeToString(doc);\r\n  }\r\n  /** @internal */\r\n  private _buildDOM(root: RNode, doc: Document, parent: Element | Document) {\r\n    for (const child of root.childNodes.values()) {\r\n      if (!child._isInternal()) {\r\n        const childElement = this._createDOMElement(child, doc, null);\r\n        parent.append(childElement);\r\n        if (childElement instanceof Element) {\r\n          this._buildDOM(child, doc, childElement);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  /** @internal */\r\n  private _createDOMElement(el: RNode, doc: Document, out: Element | Node): Element | Node {\r\n    if (el._isText()) {\r\n      out = doc.createTextNode(el.textContent);\r\n    } else if (el.nodeType === RNode.ELEMENT_NODE) {\r\n      out = out || doc.createElement((el as RElement).tagName);\r\n      if ((el as RElement).className) {\r\n        (out as Element).className = (el as RElement).className;\r\n      }\r\n      for (const k of (el as RElement).attributes) {\r\n        (out as Element).setAttribute(k.name, k.value);\r\n      }\r\n    }\r\n    return out;\r\n  }\r\n  /** @internal */\r\n  private _syncMouseStates(evt: RMouseEvent) {\r\n    this._mouseX = evt.x;\r\n    this._mouseY = evt.y;\r\n    this._buttonState = evt.buttons;\r\n    this._ctrlKey = evt.ctrlKey;\r\n    this._shiftKey = evt.shiftKey;\r\n    this._altKey = evt.altKey;\r\n    this._metaKey = evt.metaKey;\r\n  }\r\n  /** @internal */\r\n  _updateMouseLocation(x: number, y: number, button: number) {\r\n    let hits: { element: RNode; x: number; y: number }[] = null;\r\n    if (this._captureElement) {\r\n      const v = this._captureElement.toAbsolute({ x: 0, y: 0 });\r\n      hits = [{ element: this._captureElement, x: x - v.x, y: y - v.y }];\r\n    } else {\r\n      hits = this.hitTest(x, y);\r\n    }\r\n    if (!this._dragSession) {\r\n      for (const info of this._hoverElements) {\r\n        if (!hits.find((hit) => hit.element === info.element)) {\r\n          const p = info.element.toAbsolute({ x: 0, y: 0 });\r\n          info.element._onMouseLeave(x - p.x, y - p.y);\r\n          if (!info.element.isElement() || info.element.style.pointerEvents !== 'none') {\r\n            info.element.dispatchEvent(\r\n              new RMouseEvent(\r\n                RMouseEvent.NAME_MOUSELEAVE,\r\n                x,\r\n                y,\r\n                x - p.x,\r\n                y - p.y,\r\n                button,\r\n                this._buttonState,\r\n                0,\r\n                0,\r\n                this._ctrlKey,\r\n                this._shiftKey,\r\n                this._altKey,\r\n                this._metaKey,\r\n              ),\r\n            );\r\n          }\r\n        }\r\n      }\r\n      for (const info of hits) {\r\n        if (!this._hoverElements.find((hit) => hit.element === info.element)) {\r\n          info.element._onMouseEnter(info.x, info.y);\r\n          if (!info.element.isElement() || info.element.style.pointerEvents !== 'none') {\r\n            info.element.dispatchEvent(\r\n              new RMouseEvent(\r\n                RMouseEvent.NAME_MOUSEENTER,\r\n                x,\r\n                y,\r\n                info.x,\r\n                info.y,\r\n                button,\r\n                this._buttonState,\r\n                0,\r\n                0,\r\n                this._ctrlKey,\r\n                this._shiftKey,\r\n                this._altKey,\r\n                this._metaKey,\r\n              ),\r\n            );\r\n          }\r\n        }\r\n      }\r\n      const lastHover = this.getHover();\r\n      let newHover: { element: RNode; x: number; y: number } = null;\r\n      for (const hit of hits) {\r\n        if (!hit.element.isElement() || hit.element.style.pointerEvents !== 'none') {\r\n          newHover = hit;\r\n          break;\r\n        }\r\n      }\r\n      if (lastHover.element !== newHover.element) {\r\n        const p = lastHover.element.toAbsolute({ x: 0, y: 0 });\r\n        lastHover.element._onMouseOut(x - p.x, y - p.y);\r\n        const evtOut = new RMouseEvent(\r\n          RMouseEvent.NAME_MOUSEOUT,\r\n          x,\r\n          y,\r\n          x - p.x,\r\n          y - p.y,\r\n          button,\r\n          this._buttonState,\r\n          0,\r\n          0,\r\n          this._ctrlKey,\r\n          this._shiftKey,\r\n          this._altKey,\r\n          this._metaKey,\r\n        );\r\n        evtOut.relatedTarget = newHover.element;\r\n        lastHover.element.dispatchEvent(evtOut);\r\n\r\n        newHover.element._onMouseIn(newHover.x, newHover.y);\r\n        const evtOver = new RMouseEvent(\r\n          RMouseEvent.NAME_MOUSEOVER,\r\n          x,\r\n          y,\r\n          newHover.x,\r\n          newHover.y,\r\n          button,\r\n          this._buttonState,\r\n          0,\r\n          0,\r\n          this._ctrlKey,\r\n          this._shiftKey,\r\n          this._altKey,\r\n          this._metaKey,\r\n        );\r\n        evtOver.relatedTarget = lastHover.element;\r\n        newHover.element.dispatchEvent(evtOver);\r\n      }\r\n    }\r\n    this._hoverElements = hits;\r\n\r\n    if (this._dragSession) {\r\n      if (!this._dragSession.update()) {\r\n        this._dragSession = null;\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"names":["Yoga.DISPLAY_FLEX","Yoga.EDGE_LEFT","Yoga.EDGE_TOP","Yoga.EDGE_RIGHT","Yoga.EDGE_BOTTOM","Yoga.POSITION_TYPE_ABSOLUTE"],"mappings":"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"}