{"version":3,"file":"document.js","sources":["../../../libs/dom/src/document.ts"],"sourcesContent":["import {RNode} from './node';\nimport {RNodeList, RStaticNodeList} from './nodelist';\nimport type {RElement} from './element';\nimport type { RText } from './components/text';\nimport type {GUI} from './gui';\nimport type {IStyleSheet} from './style';\n\nexport class RDocument extends RNode {\n  /** @internal */\n  private _textContent: string;\n  constructor(uiscene: GUI) {\n    super(uiscene);\n    this._textContent = '';\n  }\n  get nodeType(): number {\n    return RNode.DOCUMENT_NODE;\n  }\n  get nodeName(): string {\n    return '#document';\n  }\n  get head(): RElement {\n    return this.querySelector('head');\n  }\n  get body(): RElement {\n    return this.querySelector('body');\n  }\n  get baseURI(): string {\n    return this._uiscene.baseURI;\n  }\n  set baseURI(val: string) {\n    this._uiscene.baseURI = val;\n  }\n  get textContent(): string {\n    return this._textContent;\n  }\n  set textContent(val: string) {\n    this._textContent = val;\n  }\n  get documentElement(): RElement {\n    return this.firstElementChild || null;\n  }\n  get children(): RNodeList {\n    return this._childrenElements;\n  }\n  get childElementCount(): number {\n    return this._childrenElements.length;\n  }\n  get firstElementChild(): RElement {\n    return this._getFirstChild(true) as RElement;\n  }\n  get lastElementChild(): RElement {\n    return this._getLastChild(true) as RElement;\n  }\n  appendChild(child: RNode): RNode {\n    if (child.nodeType !== RNode.ELEMENT_NODE) {\n      throw new Error('Failed to execute appendChild: only element can be inserted into document');\n    } else if (this.childElementCount > 0) {\n      throw new Error(\n        'Failed to execute appendChild: only one element can be inserted into document',\n      );\n    }\n    return super.appendChild(child);\n  }\n  insertBefore(newElement: RNode, referenceElement: RNode) {\n    if (!newElement || newElement.nodeType !== RNode.ELEMENT_NODE) {\n      throw new Error('Failed to execute insertBefore: only element can be inserted into document');\n    } else if (referenceElement || this.childElementCount > 0) {\n      throw new Error(\n        'Failed to execute insertBefore: only one element can be inserted into document',\n      );\n    }\n    return super.appendChild(newElement);\n  }\n  append(...nodes: (RNode | string)[]): void {\n    this._append(...nodes);\n  }\n  prepend(...nodes: (RNode | string)[]): void {\n    this._prepend(...nodes);\n  }\n  querySelectorAll(selectors: string): RNodeList {\n    return new RStaticNodeList(this._uiscene._querySelectorAll(this, selectors, true, false));\n  }\n  querySelector<T extends RElement>(selectors: string): T {\n    return this._uiscene._querySelectorOne<T>(this, selectors, true, false);\n  }\n  getElementsByTagName(tagname: string): RNodeList {\n    const results: RElement[] = [];\n    for (let child = this.firstElementChild; child; child = child.nextElementSibling) {\n      this._uiscene._getElementsByTagName(child, tagname, results);\n    }\n    return new RStaticNodeList(results);\n  }\n  getElementsByClassName(classnames: string): RNodeList {\n    const results: RElement[] = [];\n    classnames = classnames || '';\n    const classNameList = classnames.split(/\\s+/).filter((val) => !!val);\n    if (classNameList.length > 0) {\n      for (let child = this.firstElementChild; child; child = child.nextElementSibling) {\n        this._uiscene._getElementsByClassName(child, classNameList, results);\n      }\n    }\n    return new RStaticNodeList(results);\n  }\n  getElementById(id: string): RElement {\n    return this._uiscene._getElementById(this, id);\n  }\n  createElement<T extends RElement = RElement>(tagname: string): T {\n    return this._uiscene.createElement<T>(tagname);\n  }\n  createTextNode(): RText {\n    return this._uiscene.createTextNode();\n  }\n  /** @internal */\n  _getDefaultStyleSheet(): IStyleSheet {\n    return {\n      position: 'absolute',\n      flexDirection: 'column',\n      left: '0px',\n      top: '0px',\n      right: '0px',\n      bottom: '0px',\n      overflow: 'auto',\n      backgroundColor: 'rgba(0,0,0,0)',\n    };\n  }\n}\n"],"names":[],"mappings":"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"}