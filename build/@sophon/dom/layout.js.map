{"version":3,"file":"layout.js","sources":["../../../libs/dom/src/layout.ts"],"sourcesContent":["import { List, ListIterator } from '@sophon/base';\r\nimport * as Yoga from './typeflex/api';\r\nimport { YGSize } from './typeflex/yoga';\r\nimport type { RNode } from './node';\r\nimport type { RCoord, RColor } from './types';\r\nimport type { YGNode } from './typeflex/ygnode';\r\nimport type { YGMeasureMode } from './typeflex/enums';\r\n\r\nexport interface UIRect {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nconst yogaConfig = Yoga.Config.create();\r\nyogaConfig.config.useWebDefaults = true;\r\n\r\n/** @internal */\r\nexport class UILayout {\r\n  element: RNode;\r\n  actualRect: UIRect;\r\n  clientRect: UIRect;\r\n  borderRect: UIRect;\r\n  clippedRect: UIRect;\r\n  scrollRect: UIRect;\r\n  desiredScrollX: number;\r\n  desiredScrollY: number;\r\n  actualScrollX: number;\r\n  actualScrollY: number;\r\n  minScrollX: number;\r\n  maxScrollX: number;\r\n  minScrollY: number;\r\n  maxScrollY: number;\r\n  changeStamp: number;\r\n  node: Yoga.Node;\r\n  protected _parent: UILayout;\r\n  protected _children: List<UILayout>;\r\n  protected _iterator: ListIterator<UILayout>;\r\n  constructor(element: RNode) {\r\n    this.element = element;\r\n    this._parent = null;\r\n    this._children = new List<UILayout>();\r\n    this._iterator = null;\r\n    this.actualRect = {x: 0, y: 0, width: 0, height: 0};\r\n    this.clientRect = {x: 0, y: 0, width: 0, height: 0};\r\n    this.borderRect = {x: 0, y: 0, width: 0, height: 0};\r\n    this.clippedRect = null;\r\n    this.scrollRect = {x: 0, y: 0, width: 0, height: 0};\r\n    this.desiredScrollX = 0;\r\n    this.desiredScrollY = 0;\r\n    this.actualScrollX = 0;\r\n    this.actualScrollY = 0;\r\n    this.minScrollX = 0;\r\n    this.maxScrollX = 0;\r\n    this.minScrollY = 0;\r\n    this.maxScrollY = 0;\r\n    this.changeStamp = 0;\r\n    this.node = Yoga.Node.create(yogaConfig);\r\n    if (element && element._isText()) {\r\n      this.node.setMeasureFunc(\r\n        (\r\n          node: YGNode,\r\n          width: number,\r\n          widthMode: YGMeasureMode,\r\n          height: number,\r\n          heightMode: YGMeasureMode,\r\n        ): YGSize => {\r\n          const rc = element._measureContentSize({\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0,\r\n          });\r\n          const size = new YGSize();\r\n          size.width = rc.width;\r\n          size.height = rc.height;\r\n          return size;\r\n        },\r\n      );\r\n    }\r\n  }\r\n  invalidateLayout() {\r\n    this.element?._invalidateLayout();\r\n  }\r\n  getNumChildren(): number {\r\n    return this._children.length;\r\n  }\r\n  appendChild(child: UILayout) {\r\n    console.assert(\r\n      this._children.length === this.node.getChildCount(),\r\n      'Failed to append child layout: child count mismatch');\r\n    console.assert(\r\n      child && !child._parent,\r\n      'Failed to append child layout: invalid child or child already has an parent');\r\n    child._parent = this;\r\n    child._iterator = this._children.append(child);\r\n    this.node.insertChild(child.node, this.node.getChildCount());\r\n    this.invalidateLayout();\r\n  }\r\n  removeChild(child: UILayout) {\r\n    console.assert(\r\n      this._children.length === this.node.getChildCount(),\r\n      'Failed to append child layout: child count mismatch');\r\n    if (child._iterator && child._iterator.list === this._children) {\r\n      this.node.removeChild(child.node);\r\n      this.invalidateLayout();\r\n      this._children.remove(child._iterator);\r\n      child._parent = null;\r\n      child._iterator = null;\r\n    }\r\n  }\r\n  insertChild(child: UILayout, at: UILayout) {\r\n    console.assert(\r\n      this._children.length === this.node.getChildCount(),\r\n      'Failed to append child layout: child count mismatch');\r\n    console.assert(\r\n      child && !child._parent,\r\n      'Failed to append child layout: invalid child or child already has an parent');\r\n    console.assert(\r\n      at && at._parent === this,\r\n      'Failed to append child layout: invalid reference child');\r\n    child._parent = this;\r\n    child._iterator = this._children.insertAt(child, at._iterator);\r\n    const index = this.node.node.getChildren().indexOf(at.node.node);\r\n    console.assert(index >= 0, 'Failed to append child layout: cannot get reference child index');\r\n    this.node.insertChild(child.node, index);\r\n    this.invalidateLayout();\r\n  }\r\n  firstChild(): UILayout {\r\n    const it = this._children.begin();\r\n    return it.valid() ? it.data : null;\r\n  }\r\n  lastChild(): UILayout {\r\n    const it = this._children.rbegin();\r\n    return it.valid() ? it.data : null;\r\n  }\r\n  nextSibling(): UILayout {\r\n    const it = this._iterator?.getNext();\r\n    return it && it.valid() ? it.data : null;\r\n  }\r\n  previousSibling(): UILayout {\r\n    const it = this._iterator?.getPrev();\r\n    return it && it.valid() ? it.data : null;\r\n  }\r\n  markDirty() {\r\n    if (this.element && this.element._isText()) {\r\n      this.node.markDirty();\r\n    }\r\n  }\r\n  calcLayout(): void {\r\n    console.assert(!this._parent, 'calcLayout must be called on root element');\r\n    this.node.calculateLayout(Yoga.UNDEFINED, Yoga.UNDEFINED, Yoga.DIRECTION_LTR);\r\n    this.syncComputedRect(0, 0, false);\r\n  }\r\n  updateStyle(val: string): void {\r\n    this.element._updateStyle(val);\r\n  }\r\n  updateBorder(val: number): void {\r\n    this.element._updateBorder();\r\n  }\r\n  updateZIndex(): void {\r\n    this.element._updateZIndex();\r\n  }\r\n  updateCursor(val: string): void {\r\n    this.element._updateCursor(val);\r\n  }\r\n  updateDisplay(val: string): void {\r\n    this.element._updateDisplay(val);\r\n  }\r\n  updateFont(val: string): void {\r\n    this.element.gui?.invalidateLayout();\r\n    this.element._updateFont(val);\r\n  }\r\n  updateFontSize(val: string): void {\r\n    this.element._updateFontSize(val);\r\n  }\r\n  updateFontFamily(val: string): void {\r\n    this.element._updateFontFamily(val);\r\n  }\r\n  updateFontColor(val: string): void {\r\n    this.element._updateFontColor(val);\r\n  }\r\n  updateBorderColor(edge: number, val: RColor): void {\r\n    switch (edge) {\r\n    case Yoga.EDGE_LEFT:\r\n      this.element._updateBorderLeftColor(val);\r\n      break;\r\n    case Yoga.EDGE_TOP:\r\n      this.element._updateBorderTopColor(val);\r\n      break;\r\n    case Yoga.EDGE_RIGHT:\r\n      this.element._updateBorderRightColor(val);\r\n      break;\r\n    case Yoga.EDGE_BOTTOM:\r\n      this.element._updateBorderBottomColor(val);\r\n      break;\r\n    }\r\n  }\r\n  updateBackgroundColor(val: RColor): void {\r\n    this.element._updateBackgroundColor(val);\r\n  }\r\n  protected syncComputedRect(px: number, py: number, markChanged: boolean) {\r\n    const paddingLeft = this.node.getComputedPadding(Yoga.EDGE_LEFT);\r\n    const paddingTop = this.node.getComputedPadding(Yoga.EDGE_TOP);\r\n    const paddingRight = this.node.getComputedPadding(Yoga.EDGE_RIGHT);\r\n    const paddingBottom = this.node.getComputedPadding(Yoga.EDGE_BOTTOM);\r\n    const borderLeft = this.node.getComputedBorder(Yoga.EDGE_LEFT);\r\n    const borderTop = this.node.getComputedBorder(Yoga.EDGE_TOP);\r\n    const borderRight = this.node.getComputedBorder(Yoga.EDGE_RIGHT);\r\n    const borderBottom = this.node.getComputedBorder(Yoga.EDGE_BOTTOM);\r\n\r\n    const rect = this.actualRect;\r\n    const x = this.node.getComputedLeft() - px;\r\n    const y = this.node.getComputedTop() - py;\r\n    const w = this.node.getComputedWidth();\r\n    const h = this.node.getComputedHeight();\r\n    if (!markChanged && (x !== rect.x || y !== rect.y || w !== rect.width || h !== rect.height)) {\r\n      markChanged = true;\r\n    }\r\n    rect.x = x;\r\n    rect.y = y;\r\n    rect.width = w;\r\n    rect.height = h;\r\n\r\n    const clientRect = this.clientRect;\r\n    const cx = paddingLeft + borderLeft;\r\n    const cy = paddingTop + borderTop;\r\n    const cw = Math.max(0, rect.width - paddingLeft - paddingRight - borderLeft - borderRight);\r\n    const ch = Math.max(0, rect.height - paddingTop - paddingBottom - borderTop - borderBottom);\r\n    if (\r\n      !markChanged &&\r\n      (cx !== clientRect.x ||\r\n        cy !== clientRect.y ||\r\n        cw !== clientRect.width ||\r\n        ch !== clientRect.height)\r\n    ) {\r\n      markChanged = true;\r\n    }\r\n    clientRect.x = cx;\r\n    clientRect.y = cy;\r\n    clientRect.width = cw;\r\n    clientRect.height = ch;\r\n\r\n    const borderRect = this.borderRect;\r\n    const bx = borderLeft;\r\n    const by = borderTop;\r\n    const bw = Math.max(0, rect.width - borderLeft - borderRight);\r\n    const bh = Math.max(0, rect.height - borderTop - borderBottom);\r\n    if (\r\n      !markChanged &&\r\n      (bx !== borderRect.x ||\r\n        by !== borderRect.y ||\r\n        bw !== borderRect.width ||\r\n        bh !== borderRect.height)\r\n    ) {\r\n      markChanged = true;\r\n    }\r\n    borderRect.x = bx;\r\n    borderRect.y = by;\r\n    borderRect.width = bw;\r\n    borderRect.height = bh;\r\n\r\n    this.actualScrollX = 0;\r\n    this.actualScrollY = 0;\r\n    let minX = 0;\r\n    let minY = 0;\r\n    let maxX = clientRect.width;\r\n    let maxY = clientRect.height;\r\n    this._children.forEach((child) => {\r\n      if (child.element._isVisible()) {\r\n        child.syncComputedRect(paddingLeft + borderLeft, paddingTop + borderTop, markChanged);\r\n        const x1 = child.actualRect.x;\r\n        const y1 = child.actualRect.y;\r\n        const x2 = x1 + child.actualRect.width;\r\n        const y2 = y1 + child.actualRect.height;\r\n        minX = Math.min(minX, x1);\r\n        minY = Math.min(minY, y1);\r\n        maxX = Math.max(maxX, x2);\r\n        maxY = Math.max(maxY, y2);\r\n      }\r\n    });\r\n    this.scrollRect = {\r\n      x: minX,\r\n      y: minY,\r\n      width: maxX - minX,\r\n      height: maxY - minY,\r\n    };\r\n    this.minScrollX = this.scrollRect.x;\r\n    this.maxScrollX = this.scrollRect.x + this.scrollRect.width - clientRect.width;\r\n    this.minScrollY = this.scrollRect.y;\r\n    this.maxScrollY = this.scrollRect.y + this.scrollRect.height - clientRect.height;\r\n\r\n    if (markChanged) {\r\n      this.changeStamp++;\r\n    }\r\n  }\r\n  thisToParentClient(p: RCoord): RCoord {\r\n    p.x += this.actualRect.x;\r\n    p.y += this.actualRect.y;\r\n    return p;\r\n  }\r\n  thisToParent(p: RCoord): RCoord {\r\n    this.thisToParentClient(p);\r\n    if (this._parent) {\r\n      p.x += this._parent.clientRect.x;\r\n      p.y += this._parent.clientRect.y;\r\n    }\r\n    return p;\r\n  }\r\n  clipRectForChildren(): UIRect {\r\n    const rcClient = this.clientRect;\r\n    if (this.clippedRect) {\r\n      const x = Math.max(rcClient.x, this.clippedRect.x);\r\n      const y = Math.max(rcClient.y, this.clippedRect.y);\r\n      const width = Math.max(\r\n        0,\r\n        Math.min(this.clippedRect.x + this.clippedRect.width, rcClient.x + rcClient.width) - x,\r\n      );\r\n      const height = Math.max(\r\n        0,\r\n        Math.min(this.clippedRect.y + this.clippedRect.height, rcClient.y + rcClient.height) - y,\r\n      );\r\n      return {x, y, width, height};\r\n    } else {\r\n      return rcClient;\r\n    }\r\n  }\r\n  toAbsolute(v?: RCoord): RCoord {\r\n    v = v || {x: 0, y: 0};\r\n    let layout: UILayout = this;\r\n    v.x += layout.actualRect.x;\r\n    v.y += layout.actualRect.y;\r\n    while ((layout = layout._parent)) {\r\n      v.x += layout.actualRect.x + layout.clientRect.x;\r\n      v.y += layout.actualRect.y + layout.clientRect.y;\r\n    }\r\n    return v;\r\n  }\r\n  clipToParent(parent: UILayout): UIRect {\r\n    const parentRect: UIRect = parent.clipRectForChildren();\r\n    const vThis = this.toAbsolute({x: 0, y: 0});\r\n    const vParent = parent.toAbsolute({x: parentRect.x, y: parentRect.y});\r\n    const x1This = vThis.x;\r\n    const y1This = vThis.y;\r\n    const x2This = x1This + this.actualRect.width;\r\n    const y2This = y1This + this.actualRect.height;\r\n    const x1Parent = vParent.x;\r\n    const y1Parent = vParent.y;\r\n    const x2Parent = x1Parent + parentRect.width;\r\n    const y2Parent = y1Parent + parentRect.height;\r\n    const x1Clip = Math.max(x1This, x1Parent);\r\n    const y1Clip = Math.max(y1This, y1Parent);\r\n    const x2Clip = Math.min(x2This, x2Parent);\r\n    const y2Clip = Math.min(y2This, y2Parent);\r\n    return {\r\n      x: x1Clip - x1This,\r\n      y: y1Clip - y1This,\r\n      width: Math.max(0, x2Clip - x1Clip),\r\n      height: Math.max(0, y2Clip - y1Clip),\r\n    };\r\n  }\r\n  calcLayoutScroll() {\r\n    scrollX = Math.max(this.minScrollX, Math.min(this.maxScrollX, this.desiredScrollX));\r\n    scrollY = Math.max(this.minScrollY, Math.min(this.maxScrollY, this.desiredScrollY));\r\n    if (scrollX !== this.actualScrollX || scrollY !== this.actualScrollY) {\r\n      this._children.forEach((child) => {\r\n        if (child.element.style.position !== 'fixed') {\r\n          child.actualRect.x += this.actualScrollX - scrollX;\r\n          child.actualRect.y += this.actualScrollY - scrollY;\r\n          child._markChanged();\r\n        }\r\n      });\r\n      this.actualScrollX = scrollX;\r\n      this.actualScrollY = scrollY;\r\n    }\r\n    this._children.forEach((child) => {\r\n      child.calcLayoutScroll();\r\n    });\r\n  }\r\n  calcLayoutClip() {\r\n    let parent: UILayout = this._parent;\r\n    let xClip: UIRect = null;\r\n    let yClip: UIRect = null;\r\n    if (!this._isClipX()) {\r\n      while (parent && !parent._isClipX()) {\r\n        parent = parent._parent;\r\n      }\r\n      parent = parent ? parent._parent : null;\r\n    }\r\n    if (parent) {\r\n      xClip = this.clipToParent(parent);\r\n    }\r\n    parent = this._parent;\r\n    if (!this._isClipY()) {\r\n      while (parent && !parent._isClipY()) {\r\n        parent = parent._parent;\r\n      }\r\n      parent = parent ? parent._parent : null;\r\n    }\r\n    if (parent) {\r\n      yClip = this.clipToParent(parent);\r\n    }\r\n    const lastClippedRect = this.clippedRect;\r\n    if (xClip === null) {\r\n      this.clippedRect = yClip;\r\n    } else if (yClip === null) {\r\n      this.clippedRect = xClip;\r\n    } else {\r\n      this.clippedRect = {\r\n        x: xClip.x,\r\n        y: yClip.y,\r\n        width: xClip.width,\r\n        height: yClip.height,\r\n      };\r\n    }\r\n    if (\r\n      this.clippedRect &&\r\n      this.clippedRect.width === this.actualRect.width &&\r\n      this.clippedRect.height === this.actualRect.height\r\n    ) {\r\n      this.clippedRect = null;\r\n    }\r\n    let markChanged = false;\r\n    if (this.clippedRect !== lastClippedRect) {\r\n      if (this.clippedRect && lastClippedRect) {\r\n        markChanged =\r\n          this.clippedRect.x !== lastClippedRect.x ||\r\n          this.clippedRect.y !== lastClippedRect.y ||\r\n          this.clippedRect.width !== lastClippedRect.width ||\r\n          this.clippedRect.height !== lastClippedRect.height;\r\n      } else {\r\n        markChanged = true;\r\n      }\r\n      if (markChanged) {\r\n        this.changeStamp++;\r\n      }\r\n    }\r\n    this._children.forEach((child) => {\r\n      child.calcLayoutClip();\r\n    });\r\n  }\r\n  private _markChanged() {\r\n    this.changeStamp++;\r\n    this._children.forEach((child) => {\r\n      child._markChanged();\r\n    });\r\n  }\r\n  private _isClipX(): boolean {\r\n    return this._parent?.element?.style.overflowX !== 'visible';\r\n  }\r\n  private _isClipY(): boolean {\r\n    return this._parent?.element?.style.overflowY !== 'visible';\r\n  }\r\n}\r\n"],"names":["Yoga.Config","Yoga.Node","Yoga.UNDEFINED","Yoga.DIRECTION_LTR","Yoga.EDGE_LEFT","Yoga.EDGE_TOP","Yoga.EDGE_RIGHT","Yoga.EDGE_BOTTOM"],"mappings":"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"}