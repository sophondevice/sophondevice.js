{"version":3,"file":"yglayout.js","sources":["../../../../libs/dom/src/typeflex/yglayout.ts"],"sourcesContent":["import {YGDirection} from './enums';\nimport {YGFloatOptional} from './ygfloatoptional';\nimport {YGCachedMeasurement} from './internal';\nimport {YGFloatArrayEqual} from './utils';\nimport {YGFloatIsUndefined} from './yoga';\n\nconst kYGDefaultDimensionValues: () => [number, number] = function() {\n  return [undefined, undefined];\n}\nconst YG_MAX_CACHED_RESULT_COUNT = 16;\n\nfunction buildCache(c: number): Array<YGCachedMeasurement> {\n  const ret: Array<YGCachedMeasurement> = [];\n  for (let i = 0; i < c; i++) {\n    ret.push(new YGCachedMeasurement());\n  }\n  return ret;\n}\n\nclass YGLayout {\n  public position: [number, number, number, number];\n  public dimensions: [number, number];\n  public margin: [number, number, number, number, number, number];\n  public border: [number, number, number, number, number, number];\n  public padding: [number, number, number, number, number, number];\n  public direction: YGDirection;\n\n  public computedFlexBasisGeneration: number;\n  public computedFlexBasis: YGFloatOptional;\n  public hadOverflow: boolean;\n\n  public generationCount: number;\n  public lastOwnerDirection: YGDirection;\n\n  public nextCachedMeasurementsIndex: number;\n  public cachedMeasurements: Array<YGCachedMeasurement>;\n  public measuredDimensions: Array<number>;\n\n  public cachedLayout: YGCachedMeasurement;\n  public didUseLegacyFlag: boolean;\n  public doesLegacyStretchFlagAffectsLayout: boolean;\n\n  constructor() {\n    this.dimensions = kYGDefaultDimensionValues();\n    this.direction = YGDirection.Inherit;\n    this.computedFlexBasisGeneration = 0;\n    this.computedFlexBasis = new YGFloatOptional();\n    this.hadOverflow = false;\n    this.generationCount = 0;\n    this.lastOwnerDirection = YGDirection.RTL;\n    this.nextCachedMeasurementsIndex = 0;\n    this.measuredDimensions = kYGDefaultDimensionValues();\n    this.cachedLayout = new YGCachedMeasurement();\n    this.didUseLegacyFlag = false;\n    this.doesLegacyStretchFlagAffectsLayout = false;\n    this.position = [undefined, undefined, undefined, undefined];\n    this.margin = [undefined, undefined, undefined, undefined, undefined, undefined];\n    this.border = [undefined, undefined, undefined, undefined, undefined, undefined];\n    this.padding = [undefined, undefined, undefined, undefined, undefined, undefined];\n    this.cachedMeasurements = buildCache(YG_MAX_CACHED_RESULT_COUNT);\n  }\n\n  equal(layout: YGLayout): boolean {\n    let isEqual: boolean =\n      YGFloatArrayEqual(this.position, layout.position) &&\n      YGFloatArrayEqual(this.dimensions, layout.dimensions) &&\n      YGFloatArrayEqual(this.margin, layout.margin) &&\n      YGFloatArrayEqual(this.border, layout.border) &&\n      YGFloatArrayEqual(this.padding, layout.padding) &&\n      this.direction == layout.direction &&\n      this.hadOverflow == layout.hadOverflow &&\n      this.lastOwnerDirection == layout.lastOwnerDirection &&\n      this.nextCachedMeasurementsIndex == layout.nextCachedMeasurementsIndex &&\n      this.cachedLayout == layout.cachedLayout &&\n      this.computedFlexBasis == layout.computedFlexBasis;\n\n    for (let i = 0; i < YG_MAX_CACHED_RESULT_COUNT && isEqual; ++i) {\n      isEqual = isEqual && this.cachedMeasurements[i] == layout.cachedMeasurements[i];\n    }\n\n    if (\n      !YGFloatIsUndefined(this.measuredDimensions[0]) ||\n      !YGFloatIsUndefined(layout.measuredDimensions[0])\n    ) {\n      isEqual = isEqual && this.measuredDimensions[0] == layout.measuredDimensions[0];\n    }\n\n    if (\n      !YGFloatIsUndefined(this.measuredDimensions[1]) ||\n      !YGFloatIsUndefined(layout.measuredDimensions[1])\n    ) {\n      isEqual = isEqual && this.measuredDimensions[1] == layout.measuredDimensions[1];\n    }\n\n    return isEqual;\n  }\n\n  diff(layout: YGLayout): boolean {\n    return !this.equal(layout);\n  }\n\n  clean(): void {\n    this.dimensions = kYGDefaultDimensionValues();\n    this.direction = YGDirection.Inherit;\n    this.computedFlexBasisGeneration = 0;\n    this.computedFlexBasis = new YGFloatOptional();\n    this.hadOverflow = false;\n    this.generationCount = 0;\n    this.lastOwnerDirection = YGDirection.RTL;\n    this.nextCachedMeasurementsIndex = 0;\n    this.measuredDimensions = kYGDefaultDimensionValues();\n    this.cachedLayout = new YGCachedMeasurement();\n    this.didUseLegacyFlag = false;\n    this.doesLegacyStretchFlagAffectsLayout = false;\n    this.position = [undefined, undefined, undefined, undefined];\n    this.margin = [undefined, undefined, undefined, undefined, undefined, undefined];\n    this.border = [undefined, undefined, undefined, undefined, undefined, undefined];\n    this.padding = [undefined, undefined, undefined, undefined, undefined, undefined];\n    this.cachedMeasurements = buildCache(YG_MAX_CACHED_RESULT_COUNT);\n  }\n\n  clone(): YGLayout {\n    const newLayout = new YGLayout();\n    newLayout.dimensions = [this.dimensions[0], this.dimensions[1]];\n    newLayout.direction = this.direction;\n    newLayout.computedFlexBasisGeneration = this.computedFlexBasisGeneration;\n    newLayout.computedFlexBasis = this.computedFlexBasis.clone();\n    newLayout.hadOverflow = this.hadOverflow;\n    newLayout.generationCount = this.generationCount;\n    newLayout.lastOwnerDirection = this.lastOwnerDirection;\n    newLayout.nextCachedMeasurementsIndex = this.nextCachedMeasurementsIndex;\n    newLayout.measuredDimensions = [this.measuredDimensions[0], this.measuredDimensions[1]];\n    newLayout.cachedLayout = this.cachedLayout.clone();\n    newLayout.didUseLegacyFlag = this.didUseLegacyFlag;\n    newLayout.doesLegacyStretchFlagAffectsLayout = this.doesLegacyStretchFlagAffectsLayout;\n    newLayout.position = [this.position[0], this.position[1], this.position[2], this.position[3]];\n    newLayout.margin = [\n      this.margin[0],\n      this.margin[1],\n      this.margin[2],\n      this.margin[3],\n      this.margin[4],\n      this.margin[5],\n    ];\n    newLayout.border = [\n      this.border[0],\n      this.border[1],\n      this.border[2],\n      this.border[3],\n      this.border[4],\n      this.border[5],\n    ];\n    newLayout.padding = [\n      this.padding[0],\n      this.padding[1],\n      this.padding[2],\n      this.padding[3],\n      this.padding[4],\n      this.padding[5],\n    ];\n    newLayout.cachedMeasurements = buildCache(YG_MAX_CACHED_RESULT_COUNT);\n    return newLayout;\n  }\n}\n\nexport {YGLayout};\n"],"names":[],"mappings":"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"}