{"version":3,"file":"Rectangle.js","sources":["../../../../../libs/dom/src/maxrects-packer/geom/Rectangle.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nexport interface IRectangle {\r\n  width: number;\r\n  height: number;\r\n  x: number;\r\n  y: number;\r\n  [propName: string]: any;\r\n}\r\n\r\nexport class Rectangle implements IRectangle {\r\n  /**\r\n   * Oversized tag on rectangle which is bigger than packer itself.\r\n   *\r\n   * @type {boolean}\r\n   * @memberof Rectangle\r\n   */\r\n  public oversized = false;\r\n\r\n  /**\r\n   * Creates an instance of Rectangle.\r\n   *\r\n   * @param {number} [width=0]\r\n   * @param {number} [height=0]\r\n   * @param {number} [x=0]\r\n   * @param {number} [y=0]\r\n   * @param {boolean} [rot=false]\r\n   * @param {boolean} [allowRotation=false]\r\n   * @memberof Rectangle\r\n   */\r\n  constructor(\r\n    width = 0,\r\n    height = 0,\r\n    x = 0,\r\n    y = 0,\r\n    rot = false,\r\n    allowRotation: boolean | undefined = undefined,\r\n  ) {\r\n    this._width = width;\r\n    this._height = height;\r\n    this._x = x;\r\n    this._y = y;\r\n    this._data = {};\r\n    this._rot = rot;\r\n    this._allowRotation = allowRotation;\r\n  }\r\n\r\n  /**\r\n   * Test if two given rectangle collide each other\r\n   *\r\n   * @static\r\n   * @param {IRectangle} first\r\n   * @param {IRectangle} second\r\n   * @returns\r\n   * @memberof Rectangle\r\n   */\r\n  public static Collide(first: IRectangle, second: IRectangle) {\r\n    return first.collide(second);\r\n  }\r\n\r\n  /**\r\n   * Test if the first rectangle contains the second one\r\n   *\r\n   * @static\r\n   * @param {IRectangle} first\r\n   * @param {IRectangle} second\r\n   * @returns\r\n   * @memberof Rectangle\r\n   */\r\n  public static Contain(first: IRectangle, second: IRectangle) {\r\n    return first.contain(second);\r\n  }\r\n\r\n  /**\r\n   * Get the area (w * h) of the rectangle\r\n   *\r\n   * @returns {number}\r\n   * @memberof Rectangle\r\n   */\r\n  public area(): number {\r\n    return this.width * this.height;\r\n  }\r\n\r\n  /**\r\n   * Test if the given rectangle collide with this rectangle.\r\n   *\r\n   * @param {IRectangle} rect\r\n   * @returns {boolean}\r\n   * @memberof Rectangle\r\n   */\r\n  public collide(rect: IRectangle): boolean {\r\n    return (\r\n      rect.x < this.x + this.width &&\r\n      rect.x + rect.width > this.x &&\r\n      rect.y < this.y + this.height &&\r\n      rect.y + rect.height > this.y\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Test if this rectangle contains the given rectangle.\r\n   *\r\n   * @param {IRectangle} rect\r\n   * @returns {boolean}\r\n   * @memberof Rectangle\r\n   */\r\n  public contain(rect: IRectangle): boolean {\r\n    return (\r\n      rect.x >= this.x &&\r\n      rect.y >= this.y &&\r\n      rect.x + rect.width <= this.x + this.width &&\r\n      rect.y + rect.height <= this.y + this.height\r\n    );\r\n  }\r\n\r\n  protected _width: number;\r\n  get width(): number {\r\n    return this._width;\r\n  }\r\n  set width(value: number) {\r\n    if (value === this._width) return;\r\n    this._width = value;\r\n    this._dirty++;\r\n  }\r\n\r\n  protected _height: number;\r\n  get height(): number {\r\n    return this._height;\r\n  }\r\n  set height(value: number) {\r\n    if (value === this._height) return;\r\n    this._height = value;\r\n    this._dirty++;\r\n  }\r\n\r\n  protected _x: number;\r\n  get x(): number {\r\n    return this._x;\r\n  }\r\n  set x(value: number) {\r\n    if (value === this._x) return;\r\n    this._x = value;\r\n    this._dirty++;\r\n  }\r\n\r\n  protected _y: number;\r\n  get y(): number {\r\n    return this._y;\r\n  }\r\n  set y(value: number) {\r\n    if (value === this._y) return;\r\n    this._y = value;\r\n    this._dirty++;\r\n  }\r\n\r\n  protected _rot = false;\r\n\r\n  /**\r\n   * If the rectangle is rotated\r\n   *\r\n   * @type {boolean}\r\n   * @memberof Rectangle\r\n   */\r\n  get rot(): boolean {\r\n    return this._rot;\r\n  }\r\n\r\n  /**\r\n   * Set the rotate tag of the rectangle.\r\n   *\r\n   * note: after `rot` is set, `width/height` of this rectangle is swaped.\r\n   *\r\n   * @memberof Rectangle\r\n   */\r\n  set rot(value: boolean) {\r\n    if (this._allowRotation === false) return;\r\n\r\n    if (this._rot !== value) {\r\n      const tmp = this.width;\r\n      this.width = this.height;\r\n      this.height = tmp;\r\n      this._rot = value;\r\n      this._dirty++;\r\n    }\r\n  }\r\n\r\n  protected _allowRotation: boolean | undefined = undefined;\r\n\r\n  /**\r\n   * If the rectangle allow rotation\r\n   *\r\n   * @type {boolean}\r\n   * @memberof Rectangle\r\n   */\r\n  get allowRotation(): boolean | undefined {\r\n    return this._allowRotation;\r\n  }\r\n\r\n  /**\r\n   * Set the allowRotation tag of the rectangle.\r\n   *\r\n   * @memberof Rectangle\r\n   */\r\n  set allowRotation(value: boolean | undefined) {\r\n    if (this._allowRotation !== value) {\r\n      this._allowRotation = value;\r\n      this._dirty++;\r\n    }\r\n  }\r\n\r\n  protected _data: any;\r\n  get data(): any {\r\n    return this._data;\r\n  }\r\n  set data(value: any) {\r\n    if (value === null || value === this._data) return;\r\n    this._data = value;\r\n    // extract allowRotation settings\r\n    if (typeof value === 'object' && Object.prototype.hasOwnProperty.call(value, 'allowRotation')) {\r\n      this._allowRotation = value.allowRotation;\r\n    }\r\n    this._dirty++;\r\n  }\r\n\r\n  protected _dirty = 0;\r\n  get dirty(): boolean {\r\n    return this._dirty > 0;\r\n  }\r\n  public setDirty(value = true): void {\r\n    this._dirty = value ? this._dirty + 1 : 0;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}