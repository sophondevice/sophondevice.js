{"version":3,"file":"slider.js","sources":["../../../../libs/dom/src/components/slider.ts"],"sourcesContent":["import { REvent } from '@sophon/base';\nimport { RRectPrimitive } from '../primitive';\nimport { RElement } from '../element';\nimport {\n  RAttributeChangeEvent,\n  RMouseEvent,\n  RValueChangeEvent,\n  RElementLayoutEvent,\n} from '../events';\nimport type { GUI } from '../gui';\nimport type { IStyleSheet } from '../style';\nimport type { UIRect } from '../layout';\nimport type { RColor } from '../types';\n\nexport class Slider extends RElement {\n  /** @internal */\n  protected _blockRect: UIRect;\n  /** @internal */\n  protected _lastX: number;\n  /** @internal */\n  protected _lastY: number;\n  /** @internal */\n  protected _lastRectX: number;\n  /** @internal */\n  protected _lastRectY: number;\n  /** @internal */\n  protected _blockPos: number;\n  /** @internal */\n  protected _draggingBlock: boolean;\n  /** @internal */\n  protected _blockColor: RColor;\n  constructor(uiscene: GUI) {\n    super(uiscene);\n    this._blockRect = null;\n    this._lastX = 0;\n    this._lastY = 0;\n    this._lastRectX = 0;\n    this._lastRectY = 0;\n    this._draggingBlock = false;\n    this._blockPos = 0;\n    this._blockColor = this.style.parseColor('#555555');\n    this.addDefaultEventListener(RMouseEvent.NAME_MOUSEDOWN, function (this: Slider, evt: REvent) {\n      const data: RMouseEvent = evt as RMouseEvent;\n      if (\n        data.button === 0 && // left button\n        !this._draggingBlock &&\n        this._blockRect &&\n        data.offsetX >= this._blockRect.x &&\n        data.offsetY >= this._blockRect.y &&\n        data.offsetX < this._blockRect.x + this._blockRect.width &&\n        data.offsetY < this._blockRect.y + this._blockRect.height\n      ) {\n        this.setCapture();\n        this._lastX = data.offsetX;\n        this._lastY = data.offsetY;\n        this._lastRectX = this._blockRect.x;\n        this._lastRectY = this._blockRect.y;\n        this._draggingBlock = true;\n      }\n    });\n    this.addDefaultEventListener(RMouseEvent.NAME_MOUSEUP, function (this: Slider, evt: REvent) {\n      const data: RMouseEvent = evt as RMouseEvent;\n      if (data.button === 0 && this._draggingBlock) {\n        this.releaseCapture();\n        this._draggingBlock = false;\n      }\n    });\n    this.addDefaultEventListener(RMouseEvent.NAME_MOUSEMOVE, function (this: Slider, evt: REvent) {\n      const data: RMouseEvent = evt as RMouseEvent;\n      if (this._draggingBlock && this._blockRect) {\n        const isVertical = this.orientation === 'vertical';\n        const clientRect = this.getClientRect();\n        const mx = data.offsetX;\n        const my = data.offsetY;\n        let ratio: number;\n        if (isVertical) {\n          const freeSpace = clientRect.height - this.blockSize;\n          this._blockRect.y = Math.max(\n            clientRect.y,\n            Math.min(clientRect.y + freeSpace, this._lastRectY + my - this._lastY),\n          );\n          ratio = (this._blockRect.y - clientRect.y) / freeSpace;\n        } else {\n          const freeSpace = clientRect.width - this.blockSize;\n          this._blockRect.x = Math.max(\n            clientRect.x,\n            Math.min(clientRect.x + freeSpace, this._lastRectX + mx - this._lastX),\n          );\n          ratio = (this._blockRect.x - clientRect.x) / freeSpace;\n        }\n        const delta = this.stepValue * (Math.floor((this.rangeEnd - this.rangeStart) * ratio / this.stepValue));\n        this.value = this.rangeStart + delta;\n        const blockPos = isVertical\n          ? this._blockRect.y - clientRect.y\n          : this._blockRect.x - clientRect.x;\n        if (blockPos !== this._blockPos) {\n          this._blockPos = blockPos;\n          this._invalidateContent();\n        }\n      }\n    });\n    this.addDefaultEventListener(RElementLayoutEvent.NAME, () => {\n      this._blockPos = this._computeBlockPos();\n    });\n    this.addDefaultEventListener(RAttributeChangeEvent.NAME, (evt: REvent) => {\n      const data: RAttributeChangeEvent = evt as RAttributeChangeEvent;\n      this._onAttributeChange(data.name);\n    });\n  }\n  get value(): number {\n    return this._getNumberAttribute('value', 0);\n  }\n  set value(val: number) {\n    const oldVal = this.value;\n    this._setNumberAttribute('value', val);\n    if (this.value !== oldVal) {\n      this._blockPos = this._computeBlockPos();\n      this._invalidateContent();\n      this.dispatchEvent(new RValueChangeEvent(this.value));\n    }\n  }\n  get rangeStart(): number {\n    return this._getNumberAttribute('rangeStart', 0);\n  }\n  set rangeStart(val: number) {\n    this._setNumberAttribute('rangeStart', val);\n  }\n  get rangeEnd(): number {\n    return this._getNumberAttribute('rangeEnd', 100);\n  }\n  set rangeEnd(val: number) {\n    this._setNumberAttribute('rangeEnd', val);\n  }\n  get blockSize(): number {\n    return this._getNumberAttribute('blockSize', 8);\n  }\n  set blockSize(val: number) {\n    this._setNumberAttribute('blockSize', val);\n  }\n  get stepValue(): number {\n    return this._getNumberAttribute('stepValue', 1);\n  }\n  set stepValue(val: number) {\n    this._setNumberAttribute('stepValue', val);\n  }\n  get pageValue(): number {\n    return this._getNumberAttribute('pageValue', 10);\n  }\n  set pageValue(val: number) {\n    this._setNumberAttribute('pageValue', val);\n  }\n  get orientation(): string {\n    return this._getStringAttribute('orientation', 'vertical');\n  }\n  set orientation(val: string) {\n    this._setStringAttribute('orientation', val);\n  }\n  get blockColor(): string {\n    return this._getStringAttribute('blockColor', '#555555');\n  }\n  set blockColor(val: string) {\n    this._setStringAttribute('blockColor', val);\n    this._blockColor = this.style.parseColor(this.blockColor) || this.style.parseColor('#555555');\n    this._invalidateContent();\n  }\n  get blockImage(): string {\n    return this._getStringAttribute('blockImage', '');\n  }\n  set blockImage(val: string) {\n    this._setStringAttribute('blockImage', val);\n    this._invalidateContent();\n  }\n  /** @internal */\n  protected _onAttributeChange(name: string) {\n    if (name === 'rangeStart' || name === 'rangeEnd') {\n      this._blockPos = this._computeBlockPos();\n      this._invalidateContent();\n    }\n  }\n  /** @internal */\n  protected _buildBlockVertexData() {\n    const clipper = this._getClipper(false);\n    if (clipper) {\n      const blockColor = this._blockColor;\n      const blockImage = this.blockImage\n        ? this._uiscene.imageManager.getImage(this.blockImage)\n        : null;\n      const uvMin = blockImage?.uvMin || null;\n      const uvMax = blockImage?.uvMax || null;\n      this._batchList.addPrimitive(\n        new RRectPrimitive(\n          this._blockRect.x,\n          this._blockRect.y,\n          this._blockRect.width,\n          this._blockRect.height,\n          uvMin?.x || 0,\n          uvMin?.y || 0,\n          uvMax?.x || 0,\n          uvMax?.y || 0,\n        ),\n        clipper,\n        blockImage?.texture || null,\n        blockColor,\n      );\n    }\n  }\n  /** @internal */\n  protected _computeBlockPos() {\n    const isVertical = this.orientation === 'vertical';\n    const rangeMin = this.rangeStart < this.rangeEnd ? this.rangeStart : this.rangeEnd;\n    const rangeMax = this.rangeStart < this.rangeEnd ? this.rangeEnd : this.rangeStart;\n    const value = Math.max(Math.min(this.value, rangeMax), rangeMin);\n    const clientRect = this._layout.clientRect;\n    const freeSpace = (isVertical ? clientRect.height : clientRect.width) - this.blockSize;\n    if (freeSpace < 0) {\n      return -1;\n    }\n    return Math.floor((freeSpace * (value - this.rangeStart)) / (this.rangeEnd - this.rangeStart));\n  }\n  /** @internal */\n  protected _buildVertexData() {\n    super._buildVertexData();\n    if (this.rangeStart === this.rangeEnd) {\n      this._blockRect = null;\n      return;\n    }\n    const blockSize = Math.floor(this.blockSize);\n    if (blockSize <= 0) {\n      this._blockRect = null;\n      return;\n    }\n    const isVertical = this.orientation === 'vertical';\n    const clientRect = this.getClientRect();\n    const freeSpace = (isVertical ? clientRect.height : clientRect.width) - this.blockSize;\n    if (freeSpace < 0) {\n      this._blockRect = null;\n      return;\n    }\n    this._blockRect = {\n      x: isVertical ? clientRect.x : clientRect.x + this._blockPos,\n      y: isVertical ? clientRect.y + this._blockPos : clientRect.y,\n      width: isVertical ? clientRect.width : blockSize,\n      height: isVertical ? blockSize : clientRect.height,\n    };\n    this._buildBlockVertexData();\n  }\n  /** @internal */\n  _init(): void {}\n  /** @internal */\n  _getDefaultStyleSheet(): IStyleSheet {\n    const style = super._getDefaultStyleSheet();\n    style.padding = '0';\n    style.backgroundColor = '#ffffff';\n    return style;\n  }\n}\n"],"names":[],"mappings":"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"}