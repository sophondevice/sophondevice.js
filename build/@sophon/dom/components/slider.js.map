{"version":3,"file":"slider.js","sources":["../../../../libs/dom/src/components/slider.ts"],"sourcesContent":["import { REvent } from '@sophon/base';\r\nimport { RRectPrimitive } from '../primitive';\r\nimport { RElement } from '../element';\r\nimport {\r\n  RAttributeChangeEvent,\r\n  RMouseEvent,\r\n  RValueChangeEvent,\r\n  RElementLayoutEvent,\r\n} from '../events';\r\nimport type { GUI } from '../gui';\r\nimport type { IStyleSheet } from '../style';\r\nimport type { UIRect } from '../layout';\r\nimport type { RColor } from '../types';\r\n\r\nexport class Slider extends RElement {\r\n  /** @internal */\r\n  protected _blockRect: UIRect;\r\n  /** @internal */\r\n  protected _lastX: number;\r\n  /** @internal */\r\n  protected _lastY: number;\r\n  /** @internal */\r\n  protected _lastRectX: number;\r\n  /** @internal */\r\n  protected _lastRectY: number;\r\n  /** @internal */\r\n  protected _blockPos: number;\r\n  /** @internal */\r\n  protected _draggingBlock: boolean;\r\n  /** @internal */\r\n  protected _blockColor: RColor;\r\n  constructor(uiscene: GUI) {\r\n    super(uiscene);\r\n    this._blockRect = null;\r\n    this._lastX = 0;\r\n    this._lastY = 0;\r\n    this._lastRectX = 0;\r\n    this._lastRectY = 0;\r\n    this._draggingBlock = false;\r\n    this._blockPos = 0;\r\n    this._blockColor = this.style.parseColor('#555555');\r\n    this.addDefaultEventListener(RMouseEvent.NAME_MOUSEDOWN, function (this: Slider, evt: REvent) {\r\n      const data: RMouseEvent = evt as RMouseEvent;\r\n      if (\r\n        data.button === 0 && // left button\r\n        !this._draggingBlock &&\r\n        this._blockRect &&\r\n        data.offsetX >= this._blockRect.x &&\r\n        data.offsetY >= this._blockRect.y &&\r\n        data.offsetX < this._blockRect.x + this._blockRect.width &&\r\n        data.offsetY < this._blockRect.y + this._blockRect.height\r\n      ) {\r\n        this.setCapture();\r\n        this._lastX = data.offsetX;\r\n        this._lastY = data.offsetY;\r\n        this._lastRectX = this._blockRect.x;\r\n        this._lastRectY = this._blockRect.y;\r\n        this._draggingBlock = true;\r\n      }\r\n    });\r\n    this.addDefaultEventListener(RMouseEvent.NAME_MOUSEUP, function (this: Slider, evt: REvent) {\r\n      const data: RMouseEvent = evt as RMouseEvent;\r\n      if (data.button === 0 && this._draggingBlock) {\r\n        this.releaseCapture();\r\n        this._draggingBlock = false;\r\n      }\r\n    });\r\n    this.addDefaultEventListener(RMouseEvent.NAME_MOUSEMOVE, function (this: Slider, evt: REvent) {\r\n      const data: RMouseEvent = evt as RMouseEvent;\r\n      if (this._draggingBlock && this._blockRect) {\r\n        const isVertical = this.orientation === 'vertical';\r\n        const clientRect = this.getClientRect();\r\n        const mx = data.offsetX;\r\n        const my = data.offsetY;\r\n        let ratio: number;\r\n        if (isVertical) {\r\n          const freeSpace = clientRect.height - this.blockSize;\r\n          this._blockRect.y = Math.max(\r\n            clientRect.y,\r\n            Math.min(clientRect.y + freeSpace, this._lastRectY + my - this._lastY),\r\n          );\r\n          ratio = (this._blockRect.y - clientRect.y) / freeSpace;\r\n        } else {\r\n          const freeSpace = clientRect.width - this.blockSize;\r\n          this._blockRect.x = Math.max(\r\n            clientRect.x,\r\n            Math.min(clientRect.x + freeSpace, this._lastRectX + mx - this._lastX),\r\n          );\r\n          ratio = (this._blockRect.x - clientRect.x) / freeSpace;\r\n        }\r\n        const delta = this.stepValue * (Math.floor((this.rangeEnd - this.rangeStart) * ratio / this.stepValue));\r\n        this.value = this.rangeStart + delta;\r\n        const blockPos = isVertical\r\n          ? this._blockRect.y - clientRect.y\r\n          : this._blockRect.x - clientRect.x;\r\n        if (blockPos !== this._blockPos) {\r\n          this._blockPos = blockPos;\r\n          this._invalidateContent();\r\n        }\r\n      }\r\n    });\r\n    this.addDefaultEventListener(RElementLayoutEvent.NAME, () => {\r\n      this._blockPos = this._computeBlockPos();\r\n    });\r\n    this.addDefaultEventListener(RAttributeChangeEvent.NAME, (evt: REvent) => {\r\n      const data: RAttributeChangeEvent = evt as RAttributeChangeEvent;\r\n      this._onAttributeChange(data.name);\r\n    });\r\n  }\r\n  get value(): number {\r\n    return this._getNumberAttribute('value', 0);\r\n  }\r\n  set value(val: number) {\r\n    const oldVal = this.value;\r\n    this._setNumberAttribute('value', val);\r\n    if (this.value !== oldVal) {\r\n      this._blockPos = this._computeBlockPos();\r\n      this._invalidateContent();\r\n      this.dispatchEvent(new RValueChangeEvent(this.value));\r\n    }\r\n  }\r\n  get rangeStart(): number {\r\n    return this._getNumberAttribute('rangeStart', 0);\r\n  }\r\n  set rangeStart(val: number) {\r\n    this._setNumberAttribute('rangeStart', val);\r\n  }\r\n  get rangeEnd(): number {\r\n    return this._getNumberAttribute('rangeEnd', 100);\r\n  }\r\n  set rangeEnd(val: number) {\r\n    this._setNumberAttribute('rangeEnd', val);\r\n  }\r\n  get blockSize(): number {\r\n    return this._getNumberAttribute('blockSize', 8);\r\n  }\r\n  set blockSize(val: number) {\r\n    this._setNumberAttribute('blockSize', val);\r\n  }\r\n  get stepValue(): number {\r\n    return this._getNumberAttribute('stepValue', 1);\r\n  }\r\n  set stepValue(val: number) {\r\n    this._setNumberAttribute('stepValue', val);\r\n  }\r\n  get pageValue(): number {\r\n    return this._getNumberAttribute('pageValue', 10);\r\n  }\r\n  set pageValue(val: number) {\r\n    this._setNumberAttribute('pageValue', val);\r\n  }\r\n  get orientation(): string {\r\n    return this._getStringAttribute('orientation', 'vertical');\r\n  }\r\n  set orientation(val: string) {\r\n    this._setStringAttribute('orientation', val);\r\n  }\r\n  get blockColor(): string {\r\n    return this._getStringAttribute('blockColor', '#555555');\r\n  }\r\n  set blockColor(val: string) {\r\n    this._setStringAttribute('blockColor', val);\r\n    this._blockColor = this.style.parseColor(this.blockColor) || this.style.parseColor('#555555');\r\n    this._invalidateContent();\r\n  }\r\n  get blockImage(): string {\r\n    return this._getStringAttribute('blockImage', '');\r\n  }\r\n  set blockImage(val: string) {\r\n    this._setStringAttribute('blockImage', val);\r\n    this._invalidateContent();\r\n  }\r\n  /** @internal */\r\n  protected _onAttributeChange(name: string) {\r\n    if (name === 'rangeStart' || name === 'rangeEnd') {\r\n      this._blockPos = this._computeBlockPos();\r\n      this._invalidateContent();\r\n    }\r\n  }\r\n  /** @internal */\r\n  protected _buildBlockVertexData() {\r\n    const clipper = this._getClipper(false);\r\n    if (clipper) {\r\n      const blockColor = this._blockColor;\r\n      const blockImage = this.blockImage\r\n        ? this._uiscene.imageManager.getImage(this.blockImage)\r\n        : null;\r\n      const uvMin = blockImage?.uvMin || null;\r\n      const uvMax = blockImage?.uvMax || null;\r\n      this._batchList.addPrimitive(\r\n        new RRectPrimitive(\r\n          this._blockRect.x,\r\n          this._blockRect.y,\r\n          this._blockRect.width,\r\n          this._blockRect.height,\r\n          uvMin?.x || 0,\r\n          uvMin?.y || 0,\r\n          uvMax?.x || 0,\r\n          uvMax?.y || 0,\r\n        ),\r\n        clipper,\r\n        blockImage?.texture || null,\r\n        blockColor,\r\n      );\r\n    }\r\n  }\r\n  /** @internal */\r\n  protected _computeBlockPos() {\r\n    const isVertical = this.orientation === 'vertical';\r\n    const rangeMin = this.rangeStart < this.rangeEnd ? this.rangeStart : this.rangeEnd;\r\n    const rangeMax = this.rangeStart < this.rangeEnd ? this.rangeEnd : this.rangeStart;\r\n    const value = Math.max(Math.min(this.value, rangeMax), rangeMin);\r\n    const clientRect = this._layout.clientRect;\r\n    const freeSpace = (isVertical ? clientRect.height : clientRect.width) - this.blockSize;\r\n    if (freeSpace < 0) {\r\n      return -1;\r\n    }\r\n    return Math.floor((freeSpace * (value - this.rangeStart)) / (this.rangeEnd - this.rangeStart));\r\n  }\r\n  /** @internal */\r\n  protected _buildVertexData() {\r\n    super._buildVertexData();\r\n    if (this.rangeStart === this.rangeEnd) {\r\n      this._blockRect = null;\r\n      return;\r\n    }\r\n    const blockSize = Math.floor(this.blockSize);\r\n    if (blockSize <= 0) {\r\n      this._blockRect = null;\r\n      return;\r\n    }\r\n    const isVertical = this.orientation === 'vertical';\r\n    const clientRect = this.getClientRect();\r\n    const freeSpace = (isVertical ? clientRect.height : clientRect.width) - this.blockSize;\r\n    if (freeSpace < 0) {\r\n      this._blockRect = null;\r\n      return;\r\n    }\r\n    this._blockRect = {\r\n      x: isVertical ? clientRect.x : clientRect.x + this._blockPos,\r\n      y: isVertical ? clientRect.y + this._blockPos : clientRect.y,\r\n      width: isVertical ? clientRect.width : blockSize,\r\n      height: isVertical ? blockSize : clientRect.height,\r\n    };\r\n    this._buildBlockVertexData();\r\n  }\r\n  /** @internal */\r\n  _init(): void {}\r\n  /** @internal */\r\n  _getDefaultStyleSheet(): IStyleSheet {\r\n    const style = super._getDefaultStyleSheet();\r\n    style.padding = '0';\r\n    style.backgroundColor = '#ffffff';\r\n    return style;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}