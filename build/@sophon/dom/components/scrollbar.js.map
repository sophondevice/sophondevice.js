{"version":3,"file":"scrollbar.js","sources":["../../../../libs/dom/src/components/scrollbar.ts"],"sourcesContent":["import {Button} from './button';\r\nimport {Slider} from './slider';\r\nimport {RMouseEvent} from '../events';\r\nimport type {GUI} from '../gui';\r\nimport type {IStyleSheet} from '../style';\r\n\r\nexport class ScrollBar extends Slider {\r\n  /** @internal */\r\n  private _buttonUp: Button;\r\n  /** @internal */\r\n  private _buttonDown: Button;\r\n  constructor(uiscene: GUI) {\r\n    super(uiscene);\r\n    this._buttonUp = new Button(uiscene);\r\n    this._buttonUp._setInternal();\r\n    this.appendChild(this._buttonUp);\r\n    this._buttonUp.addDefaultEventListener(RMouseEvent.NAME_MOUSECLICK, () => {\r\n      this.value -= this.stepValue;\r\n    });\r\n    this._buttonDown = new Button(uiscene);\r\n    this._buttonDown._setInternal();\r\n    this.appendChild(this._buttonDown);\r\n    this._buttonDown.addDefaultEventListener(RMouseEvent.NAME_MOUSECLICK, () => {\r\n      this.value += this.stepValue;\r\n    });\r\n    this._updateOrientationStyle();\r\n  }\r\n  get buttonSize(): number {\r\n    return this._getNumberAttribute('buttonsize', 8);\r\n  }\r\n  set buttonSize(val: number) {\r\n    this._setNumberAttribute('buttonsize', val);\r\n  }\r\n  /** @internal */\r\n  _init(): void {}\r\n  /** @internal */\r\n  _getDefaultStyleSheet(): IStyleSheet {\r\n    const style = super._getDefaultStyleSheet();\r\n    style.overflow = 'visible';\r\n    if (this.orientation === 'vertical') {\r\n      style.paddingTop = String(this.buttonSize);\r\n      style.paddingBottom = String(this.buttonSize);\r\n    } else {\r\n      style.paddingLeft = String(this.buttonSize);\r\n      style.paddingRight = String(this.buttonSize);\r\n    }\r\n    return style;\r\n  }\r\n  /** @internal */\r\n  protected _onAttributeChange(name: string) {\r\n    name = name.toLowerCase();\r\n    super._onAttributeChange(name);\r\n    if (name === 'rangestart' || name === 'rangeend') {\r\n      this._invalidateLayout();\r\n    } else if (name === 'buttonsize' || name === 'orientation') {\r\n      this._updateOrientationStyle();\r\n      this._invalidateLayout();\r\n    }\r\n  }\r\n  /** @internal */\r\n  protected _updateScrollState(): void {}\r\n  /** @internal */\r\n  private _updateOrientationStyle() {\r\n    const vertical = this.orientation === 'vertical';\r\n    this._buttonUp.setAttribute(\r\n      'style',\r\n      vertical\r\n        ? `position:absolute;left:0;right:0;top:0;height:${this.buttonSize};background-image:default.scrollbar.up`\r\n        : `position:absolute;left:0;top:0;bottom:0;width:${this.buttonSize};background-image:default.scrollbar.left`,\r\n    );\r\n    this._buttonDown.setAttribute(\r\n      'style',\r\n      vertical\r\n        ? `position:absolute;left:0;right:0;bottom:0;height:${this.buttonSize};background-image:default.scrollbar.down;`\r\n        : `position:absolute;right:0;top:0;bottom:0;width:${this.buttonSize};background-image:default.scrollbar.right`,\r\n    );\r\n    this._invalidateLayout();\r\n    this._uiscene._markStyleRefreshForElement(this);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}