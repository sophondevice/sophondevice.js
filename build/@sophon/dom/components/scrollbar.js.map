{"version":3,"file":"scrollbar.js","sources":["../../../../libs/dom/src/components/scrollbar.ts"],"sourcesContent":["import {Button} from './button';\nimport {Slider} from './slider';\nimport {RMouseEvent} from '../events';\nimport type {GUI} from '../gui';\nimport type {IStyleSheet} from '../style';\n\nexport class ScrollBar extends Slider {\n  /** @internal */\n  private _buttonUp: Button;\n  /** @internal */\n  private _buttonDown: Button;\n  constructor(uiscene: GUI) {\n    super(uiscene);\n    this._buttonUp = new Button(uiscene);\n    this._buttonUp._setInternal();\n    this.appendChild(this._buttonUp);\n    this._buttonUp.addDefaultEventListener(RMouseEvent.NAME_MOUSECLICK, () => {\n      this.value -= this.stepValue;\n    });\n    this._buttonDown = new Button(uiscene);\n    this._buttonDown._setInternal();\n    this.appendChild(this._buttonDown);\n    this._buttonDown.addDefaultEventListener(RMouseEvent.NAME_MOUSECLICK, () => {\n      this.value += this.stepValue;\n    });\n    this._updateOrientationStyle();\n  }\n  get buttonSize(): number {\n    return this._getNumberAttribute('buttonsize', 8);\n  }\n  set buttonSize(val: number) {\n    this._setNumberAttribute('buttonsize', val);\n  }\n  /** @internal */\n  _init(): void {}\n  /** @internal */\n  _getDefaultStyleSheet(): IStyleSheet {\n    const style = super._getDefaultStyleSheet();\n    style.overflow = 'visible';\n    if (this.orientation === 'vertical') {\n      style.paddingTop = String(this.buttonSize);\n      style.paddingBottom = String(this.buttonSize);\n    } else {\n      style.paddingLeft = String(this.buttonSize);\n      style.paddingRight = String(this.buttonSize);\n    }\n    return style;\n  }\n  /** @internal */\n  protected _onAttributeChange(name: string) {\n    name = name.toLowerCase();\n    super._onAttributeChange(name);\n    if (name === 'rangestart' || name === 'rangeend') {\n      this._invalidateLayout();\n    } else if (name === 'buttonsize' || name === 'orientation') {\n      this._updateOrientationStyle();\n      this._invalidateLayout();\n    }\n  }\n  /** @internal */\n  protected _updateScrollState(): void {}\n  /** @internal */\n  private _updateOrientationStyle() {\n    const vertical = this.orientation === 'vertical';\n    this._buttonUp.setAttribute(\n      'style',\n      vertical\n        ? `position:absolute;left:0;right:0;top:0;height:${this.buttonSize};background-image:default.scrollbar.up`\n        : `position:absolute;left:0;top:0;bottom:0;width:${this.buttonSize};background-image:default.scrollbar.left`,\n    );\n    this._buttonDown.setAttribute(\n      'style',\n      vertical\n        ? `position:absolute;left:0;right:0;bottom:0;height:${this.buttonSize};background-image:default.scrollbar.down;`\n        : `position:absolute;right:0;top:0;bottom:0;width:${this.buttonSize};background-image:default.scrollbar.right`,\n    );\n    this._invalidateLayout();\n    this._uiscene._markStyleRefreshForElement(this);\n  }\n}\n"],"names":[],"mappings":"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"}